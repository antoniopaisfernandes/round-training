import{a as he,m as Ce,c as y,w as l,V as Ee,o as u,b as a,d as ce,e as V,F as J,r as K,f as ge,g as z,h as o,i as C,j as S,k as Ae,l as Pe,n as De,p as $e,q as Q,s as Te,t as H,u as Ie,v as m,x as O,y as v,z as Be,A as we,B as E,C as A,D as x,E as j,G as g,H as $,I as W,J as R,K as _,L as b,M as te,N as Y,O as X,P as ke,Q as M,R as Fe,S as Le,T as Se,U as Ne,W as qe,X as je,Y as ze,Z as ae,_ as le,$ as Oe,a0 as Re,a1 as ie,a2 as N,a3 as se,a4 as q,a5 as ne,a6 as re,a7 as de,a8 as _e,a9 as Me,aa as ve,ab as He,ac as Qe,ad as xe,ae as We,af as Ye,ag as Xe,ah as Ge,ai as Je}from"./vendor-CL89TORh.js";window.axios=he;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";let ye=document.head.querySelector('meta[name="csrf-token"]');ye&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=ye.content);const pe=Ce();window.Event={fire(e,...t){pe.emit(e,...t)},listen(e,t){pe.on(e,t)},off(e,t){pe.off(e,t)}};window.event=function(e,...t){Event.fire(e,...t)};const G=window.Event,Ke=[{type:"v-list-item",icon:"mdi-monitor-dashboard",text:"Dashboard",link:"/"},{type:"v-divider"},{type:"v-list-item",icon:"mdi-domain",text:"Companies",link:"/companies",admin:!0},{type:"v-list-item",icon:"mdi-account-edit-outline",text:"Students",link:"/students"},{type:"v-list-item",icon:"mdi-brain",text:"Program editions",link:"/program-editions"},{type:"v-list-item",icon:"mdi-microsoft-excel",text:"Reports",link:"/reports"}],Ze=[{type:"v-list-item",icon:"mdi-account-key-outline",text:"User management",link:"/admin/users",admin:!0},{type:"v-list-item",icon:"mdi-account-circle-outline",text:"Logout",link:"/logout"}],h=(e,t)=>{const n=e.__vccOpts||e;for(const[c,f]of t)n[c]=f;return n},et={props:{isActive:{default:null},auth:{type:Object,default:()=>({})}},watch:{isActive:function(e){this.drawer=e}},data:()=>({drawer:null,mainRoutes:[],footerRoutes:[]}),mounted:function(){this.mainRoutes=Ke.filter(e=>!e.admin||this.admin),this.footerRoutes=Ze.filter(e=>!e.admin||this.admin)},computed:{admin:function(){return this.auth?.roles?.filter(e=>e.name=="admin").length>0}},methods:{goto(e){e&&(document.location=e)}}};function tt(e,t,n,c,f,s){return u(),y(Ee,{modelValue:e.drawer,"onUpdate:modelValue":t[0]||(t[0]=i=>e.drawer=i),color:"primary"},{prepend:l(()=>[...t[1]||(t[1]=[o("div",{class:"tw-mt-16"},null,-1)])]),append:l(()=>[a(ce,{density:"compact",nav:""},{default:l(()=>[(u(!0),V(J,null,K(e.footerRoutes,(i,d)=>(u(),y(ge,{key:d,"prepend-icon":i.icon,title:i.text,onClick:z(p=>s.goto(i.link),["stop"])},null,8,["prepend-icon","title","onClick"]))),128))]),_:1})]),default:l(()=>[a(ce,{density:"compact",nav:""},{default:l(()=>[(u(!0),V(J,null,K(e.mainRoutes,(i,d)=>(u(),y(ge,{key:d,"prepend-icon":i.icon,title:i.text,onClick:z(p=>s.goto(i.link),["stop"])},null,8,["prepend-icon","title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])}const at=h(et,[["render",tt]]),lt={components:{NavigationDrawer:at},data:()=>({navigationDrawerIsActive:null}),props:{auth:{type:Object,default:()=>({})}},methods:{toggle(){this.navigationDrawerIsActive=!this.navigationDrawerIsActive}}};function it(e,t,n,c,f,s){const i=C("navigation-drawer");return u(),y(Te,{id:"training"},{default:l(()=>[n.auth?(u(),y(i,{key:0,isActive:e.navigationDrawerIsActive,auth:n.auth,ref:"navigationDrawer"},null,8,["isActive","auth"])):S("",!0),a(Ae,{flat:"",height:"78",color:"white"},{default:l(()=>[n.auth?(u(),y(Pe,{key:0,onClick:z(s.toggle,["stop"])},null,8,["onClick"])):S("",!0),a(De,{class:"tw-w-full"},{default:l(()=>[...t[0]||(t[0]=[o("div",{class:"tw-flex tw-items-center tw-justify-between"},[o("div",null,[o("a",{href:"/"},[o("img",{src:"/images/logo.svg",alt:"Logo"})])]),o("div",{class:"text-xl tw-mr-6 tw-font-medium tw-uppercase"},"Training Management")],-1)])]),_:1})]),_:1}),a($e,{class:"bg-grey-lighten-5"},{default:l(()=>[Q(e.$slots,"default")]),_:3})]),_:3})}const st=h(lt,[["render",it]]),ee={primary:"#74cbc8",secondary:H.zinc[800],accent:H.gray[600],error:H.red[600],info:H.blue[600],success:H.green[500],warning:H.orange[500],background:"#f2f3f3"},nt={data:()=>({visible:!1,text:"",timeout:4e3,type:"info"}),mounted(){Event.listen("toast",({type:e="info",message:t=""}={})=>{this.text=t,this.type=e,this.visible=!0})},computed:{color(){return this.type=="warning"?ee.warning:this.type=="error"?ee.error:ee.primary}}};function rt(e,t,n,c,f,s){return u(),y(Ie,{modelValue:e.visible,"onUpdate:modelValue":t[1]||(t[1]=i=>e.visible=i),timeout:e.timeout,location:"top right",color:s.color},{actions:l(()=>[a(v,{color:"blue",variant:"text",onClick:t[0]||(t[0]=i=>e.visible=!1)},{default:l(()=>[...t[2]||(t[2]=[m("Fechar",-1)])]),_:1})]),default:l(()=>[m(O(e.text)+" ",1)]),_:1},8,["modelValue","timeout","color"])}const dt=h(nt,[["render",rt]]),w={info(e){G.fire("toast",{type:"info",message:e})},success(e){G.fire("toast",{type:"success",message:e})},warning(e){G.fire("toast",{type:"warning",message:e})},error(e){G.fire("toast",{type:"error",message:e})}},ot={props:{title:{type:String,default:null},description:{type:String,default:null},report:{type:String,default:null},dateFormat:{type:String,default:"date-range"},beginDate:{type:[Date,String,null],default:null},endDate:{type:[Date,String,null],default:null}},data:()=>({loading:!1,year:null,startsAtActive:!1,startsAt:null,startsAtDate:null,endsAtActive:!1,endsAt:null,endsAtDate:null}),computed:{years:function(){const e=new Date().getFullYear();return((n,c,f)=>Array.from({length:(c-n)/f+1},(s,i)=>n+i*f))(e,e-20,-1)},form:function(){return{name:this.report,year:this.year,begin_date:this.startsAt,end_date:this.endsAt}},valid:function(){return this.year||this.startsAt}},methods:{onStartsAtSelected(e){this.startsAt=e?E(new Date(e),"yyyy-MM-dd"):null,this.startsAtActive=!1},onEndsAtSelected(e){this.endsAt=e?E(new Date(e),"yyyy-MM-dd"):null,this.endsAtActive=!1},async submit(){try{this.loading=!0;let e=await axios.post(`/reports/${this.report}`,this.form,{responseType:"arraybuffer"});we(e.data,`${this.report}.xlsx`)}catch(e){w.error(e)}finally{this.loading=!1}}},mounted(){this.startsAt=this.beginDate,this.endsAt=this.endDate}},ut=["textContent"],mt={class:"container py-0"},pt={key:0},ft={key:1},ct={class:"container tw-text-xs"};function gt(e,t,n,c,f,s){return u(),y(Be,{ref:"form"},{default:l(()=>[a(A,{"max-width":"250",class:"mx-auto"},{default:l(()=>[o("div",{class:"px-2 tw-text-xl tw-text-center bg-primary tw-text-white",textContent:O(n.title)},null,8,ut),o("div",mt,[n.dateFormat=="date-range"?(u(),V("div",pt,[a(x,{modelValue:e.startsAtActive,"onUpdate:modelValue":t[2]||(t[2]=i=>e.startsAtActive=i),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:l(({props:i})=>[a(g,$({modelValue:e.startsAt,"onUpdate:modelValue":t[0]||(t[0]=d=>e.startsAt=d),label:"From","prepend-inner-icon":"mdi-calendar",readonly:""},i,{density:"compact",class:"mt-4"}),null,16,["modelValue"])]),default:l(()=>[a(j,{modelValue:e.startsAtDate,"onUpdate:modelValue":[t[1]||(t[1]=i=>e.startsAtDate=i),s.onStartsAtSelected]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"]),a(x,{modelValue:e.endsAtActive,"onUpdate:modelValue":t[5]||(t[5]=i=>e.endsAtActive=i),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:l(({props:i})=>[a(g,$({modelValue:e.endsAt,"onUpdate:modelValue":t[3]||(t[3]=d=>e.endsAt=d),label:"To","prepend-inner-icon":"mdi-calendar",readonly:""},i,{density:"compact"}),null,16,["modelValue"])]),default:l(()=>[a(j,{modelValue:e.endsAtDate,"onUpdate:modelValue":[t[4]||(t[4]=i=>e.endsAtDate=i),s.onEndsAtSelected]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])])):S("",!0),n.dateFormat=="year"?(u(),V("div",ft,[a(W,{"prepend-inner-icon":"mdi-calendar",items:s.years,label:"Year",class:"mt-4",modelValue:e.year,"onUpdate:modelValue":t[6]||(t[6]=i=>e.year=i)},null,8,["items","modelValue"])])):S("",!0)]),o("div",ct,O(n.description),1),a(R,null,{default:l(()=>[a(_),a(v,{icon:"",class:"bg-primary",loading:e.loading,disabled:e.loading||!s.valid,onClick:s.submit},{default:l(()=>[a(b,null,{default:l(()=>[...t[7]||(t[7]=[m("mdi-microsoft-excel",-1)])]),_:1})]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},512)}const vt=h(ot,[["render",gt]]),oe={props:["items","totalItems"],data:()=>({list:[],totalList:0,options:{},editedIndex:-1,isLoading:!1,isSaving:!1,createVisible:!1}),created(){this.list=this.items.map(e=>this.instance(e)),this.totalList=this.totalItems||this.list.length},methods:{instance(e){throw Error("Instance method must be defined in parent")},newItem(){this.editedIndex=-1,this.editedItem=this.instance(),this.createVisible=!0},editItem(e){this.editedIndex=this.list.indexOf(e),this.editedItem=e.clone(),this.createVisible=!0},async deleteItem(e){const t=this.list.indexOf(e);if(confirm("Are you sure?"))try{e.delete(),this.list.splice(t,1)}catch(n){w.error(n)}},saved(e){this.editedIndex>-1?Object.assign(this.list[this.editedIndex],e):this.list.push(e),this.close()},close(){},onOptionsUpdate(e){this.options=e}},watch:{options:{async handler(e,t){if(t.page){this.isLoading=!0;try{const{data:n,meta:c}=await this.instance().fetch(e);this.list=n,this.totalList=c.total}catch{this.list=[],this.totalList=0}finally{this.isLoading=!1}}},deep:!0}}},yt={name:"c-data-table"},Vt={class:"c-data-table tw-flex tw-flex-col tw-mt-10 tw-mx-20"};function bt(e,t,n,c,f,s){return u(),V("div",Vt,[Q(e.$slots,"default")])}const ue=h(yt,[["render",bt]]),ht={name:"add-program-dialog",emits:["update:modelValue","close"],props:{visible:{type:Boolean,default:!1},existingPrograms:{type:Array,default:()=>[]}},data(){return{selectedProgram:null,isSaving:!1}},computed:{show:{get(){return this.visible},set(e){e||this.$emit("close")}},isSaveDisabled(){return this.selectedProgram===null||this.selectedProgram==""},commitButton(){return te(this.selectedProgram)?"Ok":"Save"}},methods:{async save(){if(!this.selectedProgram){this.cancel();return}if(te(this.selectedProgram)){this.close(),this.$emit("update:modelValue",{id:this.selectedProgram.value,name:this.selectedProgram.text});return}this.isSaving=!0;try{let e=await axios.post("/programs",{name:this.selectedProgram});this.cancel(),this.$emit("update:modelValue",e.data)}catch(e){this.isSaving=!1,console.warn(e?.response?.data?.errors),w.error(e)}},cancel(){this.close(),this.selectedProgram=null},close(){this.show=!1}}};function wt(e,t,n,c,f,s){return u(),y(Y,{modelValue:s.show,"onUpdate:modelValue":t[1]||(t[1]=i=>s.show=i),"max-width":"500px"},{default:l(()=>[a(A,null,{default:l(()=>[f.isSaving?(u(),y(X,{key:0,indeterminate:"",color:"primary"})):S("",!0),a(ke,null,{default:l(()=>[...t[2]||(t[2]=[m(" Add program name ",-1)])]),_:1}),a(M,null,{default:l(()=>[a(Fe,{modelValue:f.selectedProgram,"onUpdate:modelValue":t[0]||(t[0]=i=>f.selectedProgram=i),items:n.existingPrograms,"item-title":"text","item-value":"value"},null,8,["modelValue","items"])]),_:1}),a(R,null,{default:l(()=>[a(_),a(v,{color:"blue-darken-1",variant:"text",onClick:s.cancel},{default:l(()=>[...t[3]||(t[3]=[m("Cancel",-1)])]),_:1},8,["onClick"]),a(v,{color:"blue-darken-1",variant:"text",disabled:s.isSaveDisabled,onClick:s.save},{default:l(()=>[m(O(s.commitButton),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const kt=h(ht,[["render",wt]]),St=()=>{const e=new WeakSet;return(t,n)=>{if(te(n)&&n!==null){if(e.has(n))return;e.add(n)}return n}};class U{constructor(t){this._model=t,this._includes=[],this._appends=[],this._orderBy=[],this._page=null,this._limit=null,this._params={}}include(...t){return this._includes=[...this._includes,...t.flat()],this}append(...t){return this._appends=[...this._appends,...t.flat()],this}orderBy(t){return Array.isArray(t)?this._orderBy=[...this._orderBy,...t]:this._orderBy.push(t),this}page(t){return this._page=t,this}limit(t){return this._limit=t,this}where(t,n){return this._params[t]=n,this}params(t){return this._params={...this._params,...t},this}_buildQueryParams(){const t={...this._params};return this._includes.length&&(t.include=this._includes.join(",")),this._appends.length&&(t.append=this._appends.join(",")),this._orderBy.length&&(t.sort=this._orderBy.join(",")),this._page&&(t.page=this._page),this._limit&&(t.limit=this._limit),t}async get(){const t=this._buildQueryParams(),n=await k.$http.get(this._model._resourceUrl(),{params:t});return this._processResponse(n.data)}async $get(){return this.get()}_processResponse(t){if(t.data&&Array.isArray(t.data)){const n=t.data.map(c=>new this._model.constructor(c));return n.meta=t.meta||{},n.links=t.links||{},n}return Array.isArray(t)?t.map(n=>new this._model.constructor(n)):{data:t,meta:t.meta||{}}}}class k{static $http=null;constructor(t={}){Object.assign(this,t),this._builder=null}resource(){throw new Error("resource() method must be defined in subclass")}baseURL(){return""}_resourceUrl(){return`${this.baseURL()}/${this.resource()}`}_itemUrl(){return`${this._resourceUrl()}/${this.id}`}static include(...t){const n=new this;return n._builder=new U(n),n._builder.include(...t)}static append(...t){const n=new this;return n._builder=new U(n),n._builder.append(...t)}static orderBy(t){const n=new this;return n._builder=new U(n),n._builder.orderBy(t)}static page(t){const n=new this;return n._builder=new U(n),n._builder.page(t)}static limit(t){const n=new this;return n._builder=new U(n),n._builder.limit(t)}static where(t,n){const c=new this;return c._builder=new U(c),c._builder.where(t,n)}static params(t){const n=new this;return n._builder=new U(n),n._builder.params(t)}static async get(){const t=new this;return new U(t).get()}static async $get(){return this.get()}include(...t){return this._builder||(this._builder=new U(this)),this._builder.include(...t),this}append(...t){return this._builder||(this._builder=new U(this)),this._builder.append(...t),this}orderBy(t){return this._builder||(this._builder=new U(this)),this._builder.orderBy(t),this}page(t){return this._builder||(this._builder=new U(this)),this._builder.page(t),this}limit(t){return this._builder||(this._builder=new U(this)),this._builder.limit(t),this}async get(){return this._builder||(this._builder=new U(this)),this._builder.get()}async $get(){return this.get()}async save(){const t=this._getPayload();let n;this.id?n=await k.$http.put(this._itemUrl(),t,{transformRequest:this._getTransformRequest()}):n=await k.$http.post(this._resourceUrl(),t,{transformRequest:this._getTransformRequest()});const c=n.data.data||n.data;return Object.assign(this,c),this}async delete(){if(!this.id)throw new Error("Cannot delete a model without an ID");return await k.$http.delete(this._itemUrl()),this}async fetch(t){const n=t.sortBy.map((i,d)=>(t.sortDesc[d]?"-":"")+i),c=t.page||1,f=t.itemsPerPage||10;return await this.orderBy(n).page(c).limit(f).get()}export(t){const n=new URLSearchParams(t).toString(),c=`/${this.resource()}/${this.id}/export?${n}`,f=`${this.id}.${t.format}`;Le.saveAs(c,f)}clone(){return Se(this)}hasMany(t){return t}_getPayload(){const t={};for(const[n,c]of Object.entries(this))n.startsWith("_")||(t[n]=c);return t}_getTransformRequest(){return[t=>te(t)?JSON.parse(JSON.stringify(t,St())):t,...k.$http.defaults.transformRequest]}}class T extends k{resource(){return"students"}}class F extends k{resource(){return"program-editions"}students(){return this.hasMany(T)}}const Ut={name:"program-edition-create-students",emits:["add","delete"],props:{programEdition:{type:Object,default:function(){return new F}},students:{type:Array,default:()=>[]}},data:()=>({isLoading:!1,search:null,studentsFromQuery:[],student:null}),computed:{rules(){return{hours_attended:[e=>e>=0||"O valor deve numerico e positivo"]}}},methods:{addStudent(){let e=Se(this.student);e.pivot={hours_attended:null},this.$emit("add",new T(e)),this.search=null,this.studentsFromQuery=[],this.student=null},deleteStudent(e){this.$emit("delete",e)}},watch:{programEdition(e){this.student=null,this.studentsFromQuery=[]},async search(e){if(!this.isLoading){this.isLoading=!0,this.studentsFromQuery=[];try{const t=await T.orderBy("name").get();this.studentsFromQuery=Ne(t,n=>qe(this.students,{id:n.id})<0)}catch(t){w.error(t)}finally{this.isLoading=!1}}}}},Ct={class:"tw-flex tw-items-baseline"},Et={class:"tw-flex-1"};function At(e,t,n,c,f,s){return u(),y(A,{variant:"flat"},{default:l(()=>[a(M,null,{default:l(()=>[o("div",Ct,[o("div",Et,[a(je,{modelValue:e.student,"onUpdate:modelValue":t[0]||(t[0]=i=>e.student=i),items:e.studentsFromQuery,loading:e.isLoading,search:e.search,"onUpdate:search":t[1]||(t[1]=i=>e.search=i),"hide-no-data":"","hide-selected":"","item-title":"name","item-value":"id",label:"Students",placeholder:"Student name","prepend-icon":"mdi-database-search","return-object":""},null,8,["modelValue","items","loading","search"])]),a(v,{disabled:!e.student,icon:"",size:"small",color:"primary",onClick:t[2]||(t[2]=i=>s.addStudent()),class:"tw-ml-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[3]||(t[3]=[m("mdi-plus",-1)])]),_:1})]),_:1},8,["disabled"])]),n.students.length>0?(u(),y(ze,{key:0},{default:l(()=>[t[5]||(t[5]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Name"),o("th",{class:"text-left"},"Hours"),o("th",{class:"text-left"},"Â ")])],-1)),o("tbody",null,[(u(!0),V(J,null,K(n.students,(i,d)=>(u(),V("tr",{key:d},[o("td",null,O(i.name),1),o("td",null,[a(g,{modelValue:i.pivot.hours_attended,"onUpdate:modelValue":p=>i.pivot.hours_attended=p,rules:s.rules.hours_attended,density:"compact",placeholder:"You only need to fill if the number of hours is different from the program edition",class:"hours_attended"},null,8,["modelValue","onUpdate:modelValue","rules"])]),o("td",null,[a(v,{icon:"",size:"small",color:"error",onClick:p=>s.deleteStudent(d),class:"tw-ml-2 tw--mt-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[4]||(t[4]=[m("mdi-minus",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1})):S("",!0)]),_:1})]),_:1})}const Pt=h(Ut,[["render",At]]),Dt={props:{programEdition:{type:Object,required:!0}},data:()=>({isExporting:!1,cover:!0,studentsData:!0}),methods:{exportExcel(){this.isExporting=!0;try{this.programEdition.export({cover:this.cover,students:this.studentsData})}catch(e){w.warning(e)}finally{this.isExporting=!1}},async reports(e){this.isExporting=!0;try{let t=await axios.post(`/reports/${e}`,{name:e,program_edition_id:this.programEdition.id},{responseType:"arraybuffer"});we(t.data,`${e}.xlsx`)}catch(t){w.warning(t)}finally{this.isExporting=!1}}}},$t={class:"mt-10 container tw-flex tw-justify-between tw-items-end"},Tt={class:"tw-mt-8 tw-flex"};function It(e,t,n,c,f,s){return u(),V("div",null,[t[5]||(t[5]=o("h2",{class:"mt-10 bg-warning tw-text-center tw-text-white tw-font-mono tw-rounded"},"The export is based on the server data. You need to save before exporting.",-1)),o("div",$t,[o("div",null,[a(ae,{modelValue:e.cover,"onUpdate:modelValue":t[0]||(t[0]=i=>e.cover=i),label:"Global data",color:"primary"},null,8,["modelValue"]),a(ae,{modelValue:e.studentsData,"onUpdate:modelValue":t[1]||(t[1]=i=>e.studentsData=i),label:"Students information",color:"primary"},null,8,["modelValue"])]),o("div",null,[a(v,{color:"primary-darken-1",loading:e.isExporting,disabled:!e.cover&&!e.studentsData,onClick:s.exportExcel},{default:l(()=>[...t[3]||(t[3]=[m("Export",-1)])]),_:1},8,["loading","disabled","onClick"])])]),t[6]||(t[6]=o("div",{class:"tw-mt-8 tw-flex"},[o("div",{class:"tw-mx-auto"}," Reports ")],-1)),o("div",Tt,[a(v,{class:"tw-mx-auto",color:"primary-darken-1",loading:e.isExporting,onClick:t[2]||(t[2]=i=>s.reports("evaluation"))},{default:l(()=>[...t[4]||(t[4]=[m("Training assessment report",-1)])]),_:1},8,["loading"])])])}const Bt=h(Dt,[["render",It]]);class Ft extends k{resource(){return"programs"}}class Lt extends k{resource(){return"enrollments"}}class D extends k{resource(){return"companies"}}class Nt extends k{id=null;program_edition_id=null;starts_at=null;ends_at=null;interval_start=null;interval_minutes=null}const qt={name:"program-edition-create",components:{AddProgramDialog:kt,StudentsTab:Pt,ExportTab:Bt},emits:["update:modelValue","close","saved"],props:{modelValue:{type:Object,default:function(){return new F}},visible:{type:Boolean}},data:()=>({dataProgramEdition:new F,isSaving:!1,companies:[],programs:[],students:[],startsAtActive:!1,startsAtDate:null,endsAtActive:!1,endsAtDate:null,addProgramDialogVisible:!1,evaluationNotificationDateActive:!1,evaluationNotificationDate:null,tab:null}),computed:{dataVisible:{get(){return this.visible},set(e){e||(this.$emit("close"),this.tab=null,this.dataProgramEdition=new F)}},isSaveDisabled(){return!this.dataProgramEdition.name||this.isSaving},rules(){return{name:[e=>!!e||"The field should have a value."],program_id:[e=>!!e||"The field should have a value."]}},managerName(){return this.dataProgramEdition.manager?.name}},methods:{onStartsAtSelected(e){this.dataProgramEdition.starts_at=e?E(new Date(e),"yyyy-MM-dd"):null,this.startsAtActive=!1},onEndsAtSelected(e){this.dataProgramEdition.ends_at=e?E(new Date(e),"yyyy-MM-dd"):null,this.endsAtActive=!1,this.updateEvaluationNotificationDate()},onEvaluationDateSelected(e){this.dataProgramEdition.evaluation_notification_date=e?E(new Date(e),"yyyy-MM-dd"):null,this.evaluationNotificationDateActive=!1},close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{this.dataProgramEdition.enrollments=this.students.map(t=>new Lt({id:t.pivot.id,student_id:t.id,program_edition_id:this.dataProgramEdition.id,company_id:t.current_company_id,hours_attended:t.pivot.hours_attended}))||[];let e=await this.dataProgramEdition.save();this.dataProgramEdition=new F,this.isSaving=!1,this.close(),this.$emit("update:modelValue",e),this.$emit("saved",e)}catch(e){this.isSaving=!1,w.error(e)}},selectProgramId(e){e&&(this.programs.push({text:e.name,value:e.id}),this.dataProgramEdition.program_id=e.id)},addSchedule(){this.dataProgramEdition.schedules.push(new Nt)},deleteSchedule(e){this.dataProgramEdition.schedules.splice(e,1)},updateEvaluationNotificationDate(){(!this.dataProgramEdition.evaluation_notification_date||!this.dataProgramEdition.id)&&this.dataProgramEdition.ends_at&&(this.dataProgramEdition.evaluation_notification_date=E(Oe(Re(this.dataProgramEdition.ends_at),6),"yyyy-LL-dd"))},async getStudents(){if(this.students=[],!!this.modelValue.id){this.isSaving=!0;try{let e=await this.modelValue.students().get();this.students=e||[]}catch(e){w.error(e)}finally{this.isSaving=!1}}},async getPrograms(){try{let e=await Ft.get();this.programs=le(e,t=>({text:t.name,value:t.id}))}catch(e){w.error(e)}},async getCompanies(){try{let e=await D.get();this.companies=le(e,t=>({text:t.name,value:t.id}))}catch(e){w.error(e)}}},watch:{modelValue:function(e){this.dataProgramEdition=e,this.getStudents()},visible:function(e){this.dataVisible=e}},mounted:async function(){this.getPrograms(),this.getCompanies()}},jt={class:"tw-flex"},zt={class:"tw-flex tw-flex-row tw-justify-center tw-items-center tw-w-2/3"},Ot={class:"tw-flex tw-flex-row tw-justify-center tw-items-center"},Rt={class:"tw-flex tw-flex-row tw-justify-center tw-items-center"},_t={class:"tw-flex tw-flex-row tw-justify-center tw-items-center"},Mt={class:"tw-mt-2"},Ht={class:"tw-w-1/4"},Qt={class:"tw-w-1/4 tw-ml-2"},xt={class:"tw-w-1/4 tw-ml-2"},Wt={class:"tw-w-20/100 tw-ml-2"},Yt={class:"tw-w-5/100 tw-ml-2 tw-flex tw-items-center"};function Xt(e,t,n,c,f,s){const i=C("add-program-dialog"),d=C("v-datetime-picker"),p=C("students-tab"),P=C("export-tab");return u(),y(Y,{persistent:"",modelValue:s.dataVisible,"onUpdate:modelValue":t[27]||(t[27]=r=>s.dataVisible=r),"max-width":"48rem"},{default:l(()=>[a(A,{class:"px-5 py-5 vert-card",height:"90vh"},{default:l(()=>[e.isSaving?(u(),y(X,{key:0,indeterminate:"",color:"primary"})):S("",!0),a(ie,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=r=>e.tab=r)},{default:l(()=>[a(N,{value:"programEdition"},{default:l(()=>[...t[28]||(t[28]=[m("Program edition",-1)])]),_:1}),a(N,{value:"students"},{default:l(()=>[...t[29]||(t[29]=[m("Students",-1)])]),_:1}),e.dataProgramEdition.id?(u(),y(N,{key:0,value:"export"},{default:l(()=>[...t[30]||(t[30]=[m("Export",-1)])]),_:1})):S("",!0)]),_:1},8,["modelValue"]),a(se,{modelValue:e.tab,"onUpdate:modelValue":t[25]||(t[25]=r=>e.tab=r)},{default:l(()=>[a(q,{value:"programEdition"},{default:l(()=>[a(A,{variant:"flat"},{default:l(()=>[a(M,null,{default:l(()=>[o("div",jt,[o("div",zt,[a(W,{items:e.programs,modelValue:e.dataProgramEdition.program_id,"onUpdate:modelValue":[t[1]||(t[1]=r=>e.dataProgramEdition.program_id=r),t[2]||(t[2]=r=>e.dataProgramEdition.program_id=r)],label:"Program name",required:"",rules:s.rules.program_id,class:"tw-w-8/12","item-title":"text","item-value":"value"},null,8,["items","modelValue","rules"]),a(v,{icon:"",size:"small",color:"primary",onClick:t[3]||(t[3]=r=>e.addProgramDialogVisible=!0),class:"tw--mt-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[31]||(t[31]=[m("mdi-plus",-1)])]),_:1})]),_:1}),a(i,{"existing-programs":e.programs,visible:e.addProgramDialogVisible,onClose:t[4]||(t[4]=r=>e.addProgramDialogVisible=!1),"onUpdate:modelValue":t[5]||(t[5]=r=>s.selectProgramId(r))},null,8,["existing-programs","visible"])]),a(g,{modelValue:e.dataProgramEdition.name,"onUpdate:modelValue":t[6]||(t[6]=r=>e.dataProgramEdition.name=r),label:"Edition name",required:"",rules:s.rules.name,class:"ml-4 tw-w-1/3"},null,8,["modelValue","rules"])]),o("div",Ot,[a(x,{modelValue:e.startsAtActive,"onUpdate:modelValue":t[9]||(t[9]=r=>e.startsAtActive=r),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:l(({props:r})=>[a(g,$({modelValue:e.dataProgramEdition.starts_at,"onUpdate:modelValue":t[7]||(t[7]=I=>e.dataProgramEdition.starts_at=I),label:"Starts at","prepend-inner-icon":"mdi-calendar",readonly:""},r,{rules:s.rules.starts_at}),null,16,["modelValue","rules"])]),default:l(()=>[a(j,{modelValue:e.startsAtDate,"onUpdate:modelValue":[t[8]||(t[8]=r=>e.startsAtDate=r),s.onStartsAtSelected]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"]),a(x,{modelValue:e.endsAtActive,"onUpdate:modelValue":t[12]||(t[12]=r=>e.endsAtActive=r),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:l(({props:r})=>[a(g,$({modelValue:e.dataProgramEdition.ends_at,"onUpdate:modelValue":t[10]||(t[10]=I=>e.dataProgramEdition.ends_at=I),label:"Ends at","prepend-inner-icon":"mdi-calendar",readonly:""},r,{class:"tw-ml-2",rules:s.rules.ends_at}),null,16,["modelValue","rules"])]),default:l(()=>[a(j,{modelValue:e.endsAtDate,"onUpdate:modelValue":[t[11]||(t[11]=r=>e.endsAtDate=r),s.onEndsAtSelected]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"]),a(W,{items:e.companies,modelValue:e.dataProgramEdition.company_id,"onUpdate:modelValue":[t[13]||(t[13]=r=>e.dataProgramEdition.company_id=r),t[14]||(t[14]=r=>e.dataProgramEdition.company_id=r)],label:"Company",required:"",rules:s.rules.company_id,class:"tw-ml-2 tw-w-6/12","item-title":"text","item-value":"value"},null,8,["items","modelValue","rules"]),a(g,{modelValue:e.dataProgramEdition.cost,"onUpdate:modelValue":t[15]||(t[15]=r=>e.dataProgramEdition.cost=r),label:"Cost",required:"",rules:s.rules.cost,class:"tw-ml-2 tw-w-1/6 money",prefix:"$"},null,8,["modelValue","rules"])]),o("div",Rt,[a(g,{modelValue:e.dataProgramEdition.supplier,"onUpdate:modelValue":t[16]||(t[16]=r=>e.dataProgramEdition.supplier=r),label:"Supplier",required:"",rules:s.rules.supplier},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataProgramEdition.supplier_certifications,"onUpdate:modelValue":t[17]||(t[17]=r=>e.dataProgramEdition.supplier_certifications=r),label:"Certifications",required:"",rules:s.rules.supplier_certifications,class:"ml-2"},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataProgramEdition.teacher_name,"onUpdate:modelValue":t[18]||(t[18]=r=>e.dataProgramEdition.teacher_name=r),label:"Teacher name",required:"",rules:s.rules.teacher_name,class:"ml-2"},null,8,["modelValue","rules"])]),o("div",_t,[a(x,{modelValue:e.evaluationNotificationDateActive,"onUpdate:modelValue":t[21]||(t[21]=r=>e.evaluationNotificationDateActive=r),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:l(({props:r})=>[a(g,$({modelValue:e.dataProgramEdition.evaluation_notification_date,"onUpdate:modelValue":t[19]||(t[19]=I=>e.dataProgramEdition.evaluation_notification_date=I),label:"Notify accessment to","prepend-inner-icon":"mdi-calendar",readonly:""},r,{rules:s.rules.evaluation_notification_date}),null,16,["modelValue","rules"])]),default:l(()=>[a(j,{modelValue:e.evaluationNotificationDate,"onUpdate:modelValue":[t[20]||(t[20]=r=>e.evaluationNotificationDate=r),s.onEvaluationDateSelected]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"]),a(g,{modelValue:e.dataProgramEdition.goals,"onUpdate:modelValue":t[22]||(t[22]=r=>e.dataProgramEdition.goals=r),label:"Training goals",required:"",rules:s.rules.goals,class:"tw-ml-2 tw-w-3/4"},null,8,["modelValue","rules"])]),o("div",Mt,[t[33]||(t[33]=o("span",{class:"text-subtitle-1"},"Schedules",-1)),a(v,{icon:"",size:"small",color:"primary",onClick:s.addSchedule,class:"tw-ml-2 tw--mt-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[32]||(t[32]=[m("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"])]),(u(!0),V(J,null,K(e.dataProgramEdition.schedules,(r,I)=>(u(),V("div",{key:I,class:"tw-flex"},[o("div",Ht,[a(d,{label:"Start",modelValue:r.starts_at,"onUpdate:modelValue":B=>r.starts_at=B,timeFormat:"HH:mm"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",Qt,[a(d,{label:"End",modelValue:r.ends_at,"onUpdate:modelValue":B=>r.ends_at=B,timeFormat:"HH:mm"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",xt,[a(d,{label:"Break start",modelValue:r.interval_start,"onUpdate:modelValue":B=>r.interval_start=B,timeFormat:"HH:mm"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",Wt,[a(g,{label:"Break minutes",modelValue:r.interval_minutes,"onUpdate:modelValue":B=>r.interval_minutes=B},null,8,["modelValue","onUpdate:modelValue"])]),o("div",Yt,[a(v,{icon:"",size:"small",color:"error",onClick:B=>s.deleteSchedule(I),class:"tw-ml-2 tw--mt-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[34]||(t[34]=[m("mdi-minus",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))]),_:1})]),_:1})]),_:1}),a(q,{value:"students"},{default:l(()=>[a(p,{students:e.students,"program-edition":e.dataProgramEdition,onAdd:t[23]||(t[23]=r=>e.students.push(r)),onDelete:t[24]||(t[24]=r=>e.students.splice(r,1))},null,8,["students","program-edition"])]),_:1}),e.dataProgramEdition.id?(u(),y(q,{key:0,value:"export"},{default:l(()=>[a(P,{"program-edition":e.dataProgramEdition},null,8,["program-edition"])]),_:1})):S("",!0)]),_:1},8,["modelValue"]),a(R,null,{default:l(()=>[a(_),a(g,{modelValue:s.managerName,"onUpdate:modelValue":t[26]||(t[26]=r=>s.managerName=r),label:"Created by",disabled:!0},null,8,["modelValue"]),a(v,{class:"ml-2",color:"blue-darken-1",variant:"text",onClick:s.close},{default:l(()=>[...t[35]||(t[35]=[m("Cancel",-1)])]),_:1},8,["onClick"]),a(v,{class:"ml-2",color:"blue-darken-1",variant:"text",disabled:s.isSaveDisabled,onClick:s.save},{default:l(()=>[...t[36]||(t[36]=[m("Save",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Gt=h(qt,[["render",Xt]]),Jt={mixins:[oe],components:{createDialog:Gt,cDataTable:ue},data:()=>({headers:[{title:"Program",align:"start",sortable:!0,key:"program.name"},{title:"Edition",align:"start",sortable:!0,key:"name"},{title:"Start date",align:"start",sortable:!0,key:"starts_at"},{title:"End date",align:"start",sortable:!0,key:"ends_at"},{title:"Students",align:"start",sortable:!0,key:"students_count"},{title:"Actions",key:"actions",sortable:!1}],editedItem:new F,defaultItem:new F}),methods:{instance(e){return new F(e)},newProgramEdition(){this.editedItem=this.defaultItem,this.createVisible=!0}}},Kt={key:1,class:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"};function Zt(e,t,n,c,f,s){const i=C("create-dialog"),d=C("c-data-table");return u(),y(d,null,{default:l(()=>[ne(a(v,{color:"primary",class:"mb-10 tw-self-end",onClick:z(s.newProgramEdition,["stop"])},{default:l(()=>[...t[4]||(t[4]=[m("New Program Edition",-1)])]),_:1},8,["onClick"]),[[re,e.list.length>0]]),a(i,{modelValue:e.editedItem,"onUpdate:modelValue":t[0]||(t[0]=p=>e.editedItem=p),visible:e.createVisible,onSaved:t[1]||(t[1]=p=>e.saved(p)),onClose:t[2]||(t[2]=p=>e.createVisible=!1)},null,8,["modelValue","visible"]),e.list.length?(u(),y(de,{key:0,headers:e.headers,"fixed-header":!0,items:e.list,options:e.options,"items-length":e.totalItems,loading:e.isLoading,"onUpdate:options":e.onOptionsUpdate},{"item.actions":l(({item:p})=>[a(b,{size:"small",class:"mr-2",onClick:P=>e.editItem(p)},{default:l(()=>[...t[5]||(t[5]=[m(" mdi-pencil ",-1)])]),_:1},8,["onClick"]),a(b,{size:"small",onClick:P=>e.deleteItem(p)},{default:l(()=>[...t[6]||(t[6]=[m(" mdi-delete ",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","options","items-length","loading","onUpdate:options"])):(u(),V("div",Kt,[t[8]||(t[8]=o("h1",{class:"tw-font-bold tw-text-lg"},"No program editions yet.",-1)),a(v,{color:"primary",class:"mt-10 tw-block",onClick:t[3]||(t[3]=p=>e.createVisible=!0)},{default:l(()=>[...t[7]||(t[7]=[m("New Program Edition",-1)])]),_:1})]))]),_:1})}const ea=h(Jt,[["render",Zt]]);class ta extends k{}class Ue extends k{resource(){return"admin/roles"}}class L extends k{resource(){return"admin/users"}roles(){return this.hasMany(Ue)}}const aa={name:"company-create",emits:["update:modelValue","close","saved"],props:{modelValue:{type:Object,default:function(){return new D}},visible:{type:Boolean}},data:()=>({dataCompany:new D,isSaving:!1,users:[]}),computed:{dataVisible:{get(){return this.visible},set(e){e||(this.$emit("close"),this.dataCompany=new D)}},isSaveDisabled(){return!this.dataCompany.name||!this.dataCompany.vat_number||this.isSaving},rules(){return{name:[e=>!!e||"The field should have a value."],vat_number:[e=>!!e||"The field should have a value."]}}},methods:{addBudget(){this.dataCompany.budgets||(this.dataCompany.budgets=[]),this.dataCompany.budgets.push(new ta)},deleteBudget(e){this.dataCompany.budgets.splice(e,1)},close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{let e=await this.dataCompany.save();this.isSaving=!1,this.close(),this.$emit("update:modelValue",e),this.$emit("saved",e)}catch(e){this.isSaving=!1,w.error(e)}},async getUsers(){try{let e=await L.limit(999).get();this.users=le(e,t=>({text:t.name,value:t.id}))}catch(e){w.error(e)}}},watch:{modelValue:function(e){this.dataCompany=new D({budgets:[],...e})},visible:function(e){this.dataVisible=e}},mounted:async function(){this.getUsers()}},la={class:"tw-flex"},ia={class:"mt-2"},sa={class:"tw-w-1/2"},na={class:"tw-ml-2"},ra={class:"tw-w-5/100 tw-ml-2 tw-flex tw-items-center"};function da(e,t,n,c,f,s){return u(),y(Y,{modelValue:s.dataVisible,"onUpdate:modelValue":t[5]||(t[5]=i=>s.dataVisible=i),"max-width":"500px"},{default:l(()=>[a(A,{class:"px-5 py-5",height:"90vh"},{default:l(()=>[e.isSaving?(u(),y(X,{key:0,indeterminate:"",color:"primary"})):S("",!0),a(ke,null,{default:l(()=>[...t[6]||(t[6]=[o("span",{class:"text-h5"},"Company",-1)])]),_:1}),a(M,{class:"mt-5"},{default:l(()=>[a(g,{autofocus:"",modelValue:e.dataCompany.name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.dataCompany.name=i),label:"Name",required:"",rules:s.rules.name},null,8,["modelValue","rules"]),o("div",la,[a(g,{modelValue:e.dataCompany.short_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.dataCompany.short_name=i),label:"Short name",required:"",rules:s.rules.short_name,class:"tw-w-1/2"},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataCompany.vat_number,"onUpdate:modelValue":t[2]||(t[2]=i=>e.dataCompany.vat_number=i),label:"VAT Number",required:"",rules:s.rules.vat_number,class:"tw-w-1/2 tw-ml-2"},null,8,["modelValue","rules"])]),o("div",null,[a(W,{items:e.users,modelValue:e.dataCompany.coordinator_id,"onUpdate:modelValue":[t[3]||(t[3]=i=>e.dataCompany.coordinator_id=i),t[4]||(t[4]=i=>e.dataCompany.coordinator_id=i)],label:"Local coordinator",required:"","item-title":"text","item-value":"value"},null,8,["items","modelValue"])]),o("div",ia,[t[8]||(t[8]=o("span",{class:"text-subtitle-1"},"Budgets",-1)),a(v,{icon:"",size:"small",color:"primary",onClick:s.addBudget,class:"tw-ml-2 tw--mt-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[7]||(t[7]=[m("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"])]),(u(!0),V(J,null,K(e.dataCompany.budgets,(i,d)=>(u(),V("div",{key:d,class:"tw-flex"},[o("div",sa,[a(g,{label:"Year",modelValue:i.year,"onUpdate:modelValue":p=>i.year=p},null,8,["modelValue","onUpdate:modelValue"])]),o("div",na,[a(g,{label:"Budget",modelValue:i.budget,"onUpdate:modelValue":p=>i.budget=p,prefix:"$",class:"money"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",ra,[a(v,{icon:"",size:"small",color:"error",onClick:p=>s.deleteBudget(d),class:"tw-ml-2 tw--mt-2"},{default:l(()=>[a(b,null,{default:l(()=>[...t[9]||(t[9]=[m("mdi-minus",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))]),_:1}),a(R,null,{default:l(()=>[a(_),a(v,{color:"blue-darken-1",variant:"text",onClick:s.close},{default:l(()=>[...t[10]||(t[10]=[m("Cancel",-1)])]),_:1},8,["onClick"]),a(v,{color:"blue-darken-1",variant:"text",disabled:s.isSaveDisabled,onClick:s.save},{default:l(()=>[...t[11]||(t[11]=[m("Save",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const oa=h(aa,[["render",da]]),ua={mixins:[oe],components:{createDialog:oa,cDataTable:ue},data:()=>({headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Coordinator",align:"start",sortable:!0,key:"coordinator.name"},{title:"VAT Number",align:"start",sortable:!0,key:"vat_number"},{title:"Actions",key:"actions",sortable:!1}],defaultItem:new D,editedItem:new D,createVisible:!1}),methods:{instance(e){return new D(e)}}},ma={key:1,class:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"};function pa(e,t,n,c,f,s){const i=C("create-dialog"),d=C("c-data-table");return u(),y(d,null,{default:l(()=>[ne(a(v,{color:"primary",class:"mb-10 tw-self-end",onClick:z(e.newItem,["stop"])},{default:l(()=>[...t[4]||(t[4]=[m("New Company",-1)])]),_:1},8,["onClick"]),[[re,e.list.length>0]]),a(i,{modelValue:e.editedItem,"onUpdate:modelValue":t[0]||(t[0]=p=>e.editedItem=p),visible:e.createVisible,onSaved:t[1]||(t[1]=p=>e.saved(p)),onClose:t[2]||(t[2]=p=>e.createVisible=!1)},null,8,["modelValue","visible"]),e.list.length?(u(),y(de,{key:0,headers:e.headers,"fixed-header":!0,items:e.list,class:"elevation-1"},{"item.actions":l(({item:p})=>[a(b,{size:"small",class:"mr-2",onClick:P=>e.editItem(p)},{default:l(()=>[...t[5]||(t[5]=[m(" mdi-pencil ",-1)])]),_:1},8,["onClick"]),a(b,{size:"small",onClick:P=>e.deleteItem(p)},{default:l(()=>[...t[6]||(t[6]=[m(" mdi-delete ",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items"])):(u(),V("div",ma,[t[8]||(t[8]=o("h1",{class:"tw-font-bold tw-text-lg"},"No companies yet.",-1)),a(v,{color:"primary",class:"mt-10 tw-block",onClick:t[3]||(t[3]=p=>e.createVisible=!0)},{default:l(()=>[...t[7]||(t[7]=[m("New Company",-1)])]),_:1})]))]),_:1})}const fa=h(ua,[["render",pa]]),ca={props:{student:{type:Object,required:!0}},data:()=>({isExporting:!1,cover:!0,programEditions:!0}),methods:{exportExcel(){this.isExporting=!0;try{this.student.export({cover:this.cover,program_editions:this.programEditions})}catch(e){w.warning(e)}finally{this.isExporting=!1}}}},ga={class:"mt-10 container tw-flex tw-justify-between tw-items-end"};function va(e,t,n,c,f,s){return u(),V("div",null,[t[3]||(t[3]=o("h2",{class:"mt-10 bg-warning tw-text-center tw-text-white tw-font-mono tw-rounded"},"The export is based on the server data. You need to save before exporting.",-1)),o("div",ga,[o("div",null,[a(ae,{modelValue:e.cover,"onUpdate:modelValue":t[0]||(t[0]=i=>e.cover=i),label:"Global data",color:"primary"},null,8,["modelValue"]),a(ae,{modelValue:e.programEditions,"onUpdate:modelValue":t[1]||(t[1]=i=>e.programEditions=i),label:"Program edition informations",color:"primary"},null,8,["modelValue"])]),o("div",null,[a(v,{color:"primary-darken-1",loading:e.isExporting,disabled:!e.cover&&!e.programEditions,onClick:s.exportExcel},{default:l(()=>[...t[2]||(t[2]=[m("Export",-1)])]),_:1},8,["loading","disabled","onClick"])])])])}const ya=h(ca,[["render",va]]),Va={name:"student-create",components:{ExportTab:ya},emits:["update:modelValue","close","saved"],props:{modelValue:{type:Object,default:function(){return new T}},visible:{type:Boolean}},data:()=>({dataStudent:new T,isSaving:!1,citizenIdValidityDatePickerActive:!1,citizenIdValidityDate:null,companies:[],tab:null}),computed:{dataVisible:{get(){return this.visible},set(e){e||(this.$emit("close"),this.dataStudent=new T)}},isSaveDisabled(){return!this.dataStudent.name||!this.dataStudent.current_company_id||this.isSaving},rules(){return{name:[e=>!!e||"The field should have a value."],vat_number:[e=>!!e||"The field should have a value."]}},rgpd(){return Object.prototype.hasOwnProperty.call(this.modelValue,"citizen_id")&&Object.prototype.hasOwnProperty.call(this.modelValue,"citizen_id_validity")}},methods:{onCitizenIdValiditySelected(e){this.dataStudent.citizen_id_validity=e?E(new Date(e),"yyyy-MM-dd"):null,this.citizenIdValidityDatePickerActive=!1},close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{let e=await this.dataStudent.save();this.isSaving=!1,this.close(),this.$emit("update:modelValue",e),this.$emit("saved",e)}catch(e){this.isSaving=!1,w.error(e)}}},watch:{modelValue:function(e){this.dataStudent=e},visible:function(e){this.dataVisible=e}},mounted:async function(){try{let e=await D.get();this.companies=le(e,t=>({text:t.name,value:t.id}))}catch(e){w.error(e)}}},ba={class:"tw-flex"},ha={key:0,class:"tw-flex"},wa={key:1,class:"tw-flex"};function ka(e,t,n,c,f,s){const i=C("export-tab");return u(),y(Y,{scrollable:"",modelValue:s.dataVisible,"onUpdate:modelValue":t[16]||(t[16]=d=>s.dataVisible=d),"max-width":"48rem"},{default:l(()=>[a(A,{class:"px-5 py-5 vert-card",height:"90vh"},{default:l(()=>[e.isSaving?(u(),y(X,{key:0,indeterminate:"",color:"primary"})):S("",!0),a(ie,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>e.tab=d)},{default:l(()=>[a(N,{value:"student"},{default:l(()=>[...t[17]||(t[17]=[m("Student",-1)])]),_:1}),n.modelValue.id?(u(),y(N,{key:0,value:"export"},{default:l(()=>[...t[18]||(t[18]=[m("Export",-1)])]),_:1})):S("",!0)]),_:1},8,["modelValue"]),a(se,{modelValue:e.tab,"onUpdate:modelValue":t[15]||(t[15]=d=>e.tab=d)},{default:l(()=>[a(q,{value:"student"},{default:l(()=>[a(A,{variant:"flat"},{default:l(()=>[a(M,{class:"mt-5"},{default:l(()=>[a(g,{autofocus:"",modelValue:e.dataStudent.name,"onUpdate:modelValue":t[1]||(t[1]=d=>e.dataStudent.name=d),label:"Name","prepend-icon":"mdi-account-edit-outline",required:"",rules:s.rules.name},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataStudent.address,"onUpdate:modelValue":t[2]||(t[2]=d=>e.dataStudent.address=d),label:"Address","prepend-icon":"mdi-map-marker",required:"",rules:s.rules.address},null,8,["modelValue","rules"]),o("div",ba,[a(g,{modelValue:e.dataStudent.postal_code,"onUpdate:modelValue":t[3]||(t[3]=d=>e.dataStudent.postal_code=d),label:"Postal C.","prepend-icon":"mdi-city",required:"",class:"tw-w-1/4",rules:s.rules.postal_code},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataStudent.city,"onUpdate:modelValue":t[4]||(t[4]=d=>e.dataStudent.city=d),label:"City","prepend-icon":"mdi-city",required:"",class:"tw-w-3/4 tw-ml-2",rules:s.rules.city},null,8,["modelValue","rules"])]),s.rgpd?(u(),V("div",ha,[a(g,{modelValue:e.dataStudent.citizen_id,"onUpdate:modelValue":t[5]||(t[5]=d=>e.dataStudent.citizen_id=d),label:"Citizen card","prepend-icon":"mdi-card-account-details-outline",required:"",class:"tw-w-3/4",rules:s.rules.citizen_id},null,8,["modelValue","rules"]),a(x,{modelValue:e.citizenIdValidityDatePickerActive,"onUpdate:modelValue":t[8]||(t[8]=d=>e.citizenIdValidityDatePickerActive=d),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:l(({props:d})=>[a(g,$({modelValue:e.dataStudent.citizen_id_validity,"onUpdate:modelValue":t[6]||(t[6]=p=>e.dataStudent.citizen_id_validity=p),label:"Validity","prepend-icon":"mdi-calendar",readonly:""},d,{class:"tw-w-1/4 tw-ml-2",rules:s.rules.citizen_id_validity}),null,16,["modelValue","rules"])]),default:l(()=>[a(j,{modelValue:e.citizenIdValidityDate,"onUpdate:modelValue":[t[7]||(t[7]=d=>e.citizenIdValidityDate=d),s.onCitizenIdValiditySelected]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])])):S("",!0),a(g,{modelValue:e.dataStudent.email,"onUpdate:modelValue":t[9]||(t[9]=d=>e.dataStudent.email=d),label:"E-mail",type:"email","prepend-icon":"mdi-email-outline",required:"",rules:s.rules.email},null,8,["modelValue","rules"]),s.rgpd?(u(),V("div",wa,[a(g,{modelValue:e.dataStudent.birth_place,"onUpdate:modelValue":t[10]||(t[10]=d=>e.dataStudent.birth_place=d),label:"Birth place","prepend-icon":"mdi-map-marker",required:"",rules:s.rules.birth_place},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataStudent.nationality,"onUpdate:modelValue":t[11]||(t[11]=d=>e.dataStudent.nationality=d),label:"Birth country","prepend-icon":"mdi-map-marker",required:"",class:"tw-ml-2",rules:s.rules.nationality},null,8,["modelValue","rules"])])):S("",!0),a(_e,{class:"tw-my-4"}),a(W,{items:e.companies,modelValue:e.dataStudent.current_company_id,"onUpdate:modelValue":[t[12]||(t[12]=d=>e.dataStudent.current_company_id=d),t[13]||(t[13]=d=>e.dataStudent.current_company_id=d)],label:"Company","prepend-icon":"mdi-factory",required:"",rules:s.rules.company,"item-title":"text","item-value":"value"},null,8,["items","modelValue","rules"]),a(g,{modelValue:e.dataStudent.current_job_title,"onUpdate:modelValue":t[14]||(t[14]=d=>e.dataStudent.current_job_title=d),label:"Job title","prepend-icon":"mdi-barcode-scan",required:"",rules:s.rules.current_job_title},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(q,{value:"export"},{default:l(()=>[a(i,{student:e.dataStudent},null,8,["student"])]),_:1})]),_:1},8,["modelValue"]),a(R,null,{default:l(()=>[a(_),a(v,{color:"blue-darken-1",variant:"text",onClick:s.close},{default:l(()=>[...t[19]||(t[19]=[m("Cancel",-1)])]),_:1},8,["onClick"]),a(v,{color:"blue-darken-1",variant:"text",disabled:s.isSaveDisabled,onClick:s.save},{default:l(()=>[...t[20]||(t[20]=[m("Save",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Sa=h(Va,[["render",ka]]),Ua={mixins:[oe],components:{createDialog:Sa,cDataTable:ue},data:()=>({headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Company",align:"start",sortable:!0,key:"company.name"},{title:"Actions",key:"actions",sortable:!1}],editedItem:new T,defaultItem:new T,createVisible:!1}),methods:{instance(e){return new T(e)}}},Ca={key:1,class:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"};function Ea(e,t,n,c,f,s){const i=C("create-dialog"),d=C("c-data-table");return u(),y(d,null,{default:l(()=>[ne(a(v,{color:"primary",class:"mb-10 tw-self-end",onClick:z(e.newItem,["stop"])},{default:l(()=>[...t[4]||(t[4]=[m("Add student",-1)])]),_:1},8,["onClick"]),[[re,e.list.length>0]]),a(i,{modelValue:e.editedItem,"onUpdate:modelValue":t[0]||(t[0]=p=>e.editedItem=p),visible:e.createVisible,onSaved:t[1]||(t[1]=p=>e.saved(p)),onClose:t[2]||(t[2]=p=>e.createVisible=!1)},null,8,["modelValue","visible"]),e.list.length?(u(),y(de,{key:0,headers:e.headers,"fixed-header":!0,items:e.list,options:e.options,"items-length":e.totalItems,loading:e.isLoading,"onUpdate:options":e.onOptionsUpdate,class:"elevation-1"},{"item.actions":l(({item:p})=>[a(b,{size:"small",class:"mr-2",onClick:P=>e.editItem(p)},{default:l(()=>[...t[5]||(t[5]=[m(" mdi-pencil ",-1)])]),_:1},8,["onClick"]),a(b,{size:"small",onClick:P=>e.deleteItem(p)},{default:l(()=>[...t[6]||(t[6]=[m(" mdi-delete ",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","options","items-length","loading","onUpdate:options"])):(u(),V("div",Ca,[t[8]||(t[8]=o("h1",{class:"tw-font-bold tw-text-lg"},"No students yet.",-1)),a(v,{color:"primary",class:"mt-10 tw-block",onClick:t[3]||(t[3]=p=>e.createVisible=!0)},{default:l(()=>[...t[7]||(t[7]=[m("Add student",-1)])]),_:1})]))]),_:1})}const Aa=h(Ua,[["render",Ea]]),Pa={name:"user-create",emits:["update:modelValue","close","saved"],props:{modelValue:{type:Object,default:function(){return new L}},visible:{type:Boolean}},data:()=>({dataUser:new L,isSaving:!1,roles:[],tab:null}),computed:{dataVisible:{get(){return this.visible},set(e){e||(this.$emit("close"),this.dataUser=new L)}},isSaveDisabled(){return!this.dataUser.name||!this.dataUser.email||!(this.dataUser.roles&&this.dataUser.roles.length)||this.isSaving},rules(){return{name:[e=>!!e||"The field should have a value."],email:[e=>!!e||"The field should have a value."],password_confirmation:[e=>(!!e&&e)===this.dataUser.password||"Password nao coincidem."]}}},methods:{close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{let e=await this.dataUser.save();this.isSaving=!1,this.close(),this.$emit("update:modelValue",e),this.$emit("saved",e)}catch(e){this.isSaving=!1,w.error(e)}}},watch:{modelValue:function(e){this.dataUser=new L({roles:[],...e})},visible:function(e){this.dataVisible=e}},mounted:async function(){try{this.roles=await Ue.get()}catch(e){w.error(e)}}};function Da(e,t,n,c,f,s){return u(),y(Y,{scrollable:"",modelValue:s.dataVisible,"onUpdate:modelValue":t[7]||(t[7]=i=>s.dataVisible=i),"max-width":"48rem"},{default:l(()=>[a(A,{class:"px-5 py-5 vert-card",height:"90vh"},{default:l(()=>[e.isSaving?(u(),y(X,{key:0,indeterminate:"",color:"primary"})):S("",!0),a(ie,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=i=>e.tab=i)},{default:l(()=>[a(N,{value:"user"},{default:l(()=>[...t[8]||(t[8]=[m("User",-1)])]),_:1})]),_:1},8,["modelValue"]),a(se,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=i=>e.tab=i)},{default:l(()=>[a(q,{value:"user"},{default:l(()=>[a(A,{variant:"flat"},{default:l(()=>[a(M,null,{default:l(()=>[a(g,{autofocus:"",modelValue:e.dataUser.name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.dataUser.name=i),label:"Name",id:"name","prepend-icon":"mdi-account-edit-outline",required:"",rules:s.rules.name},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataUser.email,"onUpdate:modelValue":t[2]||(t[2]=i=>e.dataUser.email=i),label:"E-mail",id:"email",type:"email","prepend-icon":"mdi-email-outline",required:"",rules:s.rules.email},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataUser.password,"onUpdate:modelValue":t[3]||(t[3]=i=>e.dataUser.password=i),label:"Password",id:"password",type:"password","prepend-icon":"mdi-lastpass",required:"",rules:s.rules.password},null,8,["modelValue","rules"]),a(g,{modelValue:e.dataUser.password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=i=>e.dataUser.password_confirmation=i),label:"Password confirmation",id:"password_confirmation",type:"password","prepend-icon":"mdi-lastpass",required:"",rules:s.rules.password_confirmation},null,8,["modelValue","rules"]),a(W,{modelValue:e.dataUser.roles,"onUpdate:modelValue":t[5]||(t[5]=i=>e.dataUser.roles=i),items:e.roles,"item-title":"name","item-value":"id",chips:"","closable-chips":"",label:"Roles",id:"roles",multiple:"","prepend-icon":"mdi-dolly"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(R,null,{default:l(()=>[a(_),a(v,{color:"blue-darken-1",variant:"text",onClick:s.close},{default:l(()=>[...t[9]||(t[9]=[m("Cancel",-1)])]),_:1},8,["onClick"]),a(v,{color:"blue-darken-1",variant:"text",disabled:s.isSaveDisabled,onClick:s.save},{default:l(()=>[...t[10]||(t[10]=[m("Save",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const $a=h(Pa,[["render",Da]]),Ta={mixins:[oe],components:{createDialog:$a,cDataTable:ue},data:()=>({headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Email",align:"start",sortable:!0,key:"email"},{title:"Actions",key:"actions",sortable:!1}],editedItem:new L,defaultItem:new L,createVisible:!1}),methods:{instance(e){return new L(e)}}},Ia={key:1,class:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"};function Ba(e,t,n,c,f,s){const i=C("create-dialog"),d=C("c-data-table");return u(),y(d,null,{default:l(()=>[ne(a(v,{color:"primary",class:"mb-10 tw-self-end",onClick:z(e.newItem,["stop"])},{default:l(()=>[...t[4]||(t[4]=[m("Add user",-1)])]),_:1},8,["onClick"]),[[re,e.list.length>0]]),a(i,{modelValue:e.editedItem,"onUpdate:modelValue":t[0]||(t[0]=p=>e.editedItem=p),visible:e.createVisible,onSaved:t[1]||(t[1]=p=>e.saved(p)),onClose:t[2]||(t[2]=p=>e.createVisible=!1)},null,8,["modelValue","visible"]),e.list.length?(u(),y(de,{key:0,headers:e.headers,"fixed-header":!0,items:e.list,options:e.options,"items-length":e.totalItems,loading:e.isLoading,"onUpdate:options":e.onOptionsUpdate,class:"elevation-1"},{"item.actions":l(({item:p})=>[a(b,{size:"small",class:"mr-2",onClick:P=>e.editItem(p)},{default:l(()=>[...t[5]||(t[5]=[m(" mdi-pencil ",-1)])]),_:1},8,["onClick"]),a(b,{size:"small",onClick:P=>e.deleteItem(p)},{default:l(()=>[...t[6]||(t[6]=[m(" mdi-delete ",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","options","items-length","loading","onUpdate:options"])):(u(),V("div",Ia,[t[8]||(t[8]=o("h1",{class:"tw-font-bold tw-text-lg"},"Ainda nao existem alunos.",-1)),a(v,{color:"primary",class:"mt-10 tw-block",onClick:t[3]||(t[3]=p=>e.createVisible=!0)},{default:l(()=>[...t[7]||(t[7]=[m("Add user",-1)])]),_:1})]))]),_:1})}const Fa=h(Ta,[["render",Ba]]),Ve="",be="00:00:00",Z="yyyy-MM-dd",fe="HH:mm:ss",La=340,Na="LIMPAR",qa="OK",ja={name:"v-datetime-picker",emits:["update:modelValue"],props:{modelValue:{type:[Date,String],default:null},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dialogWidth:{type:Number,default:La},dateFormat:{type:String,default:Z},timeFormat:{type:String,default:fe},clearText:{type:String,default:Na},okText:{type:String,default:qa},textFieldProps:{type:Object,default:()=>({})},datePickerProps:{type:Object,default:()=>({})},timePickerProps:{type:Object,default:function(){return{format:"24hr",scrollable:!0}}}},data(){return{display:!1,activeTab:"calendar",date:Ve,dateValue:null,time:be}},mounted(){this.init()},computed:{dateTimeFormat(){return this.dateFormat+" "+this.timeFormat},defaultDateTimeFormat(){return Z+" "+fe},formattedDatetime(){return this.selectedDatetime?E(this.selectedDatetime,this.dateTimeFormat):""},selectedDatetime(){if(this.date&&this.time){let e=this.date+" "+this.time;return this.time.length===5&&(e+=":00"),ve(e,this.defaultDateTimeFormat,new Date)}else return null},dateSelected(){return!this.date}},methods:{init(){if(!this.modelValue)return;let e;this.modelValue instanceof Date?e=this.modelValue:(typeof this.modelValue=="string"||this.modelValue instanceof String)&&(e=ve(this.modelValue,this.dateTimeFormat,new Date)),this.date=E(e,Z),this.dateValue=e,this.time=E(e,fe)},okHandler(){this.resetPicker(),this.$emit("update:modelValue",this.selectedDatetime)},clearHandler(){this.resetPicker(),this.date=Ve,this.dateValue=null,this.time=be,this.$emit("update:modelValue",null)},resetPicker(){this.display=!1,this.activeTab="calendar",this.$refs.timer&&(this.$refs.timer.selectingHour=!0)},showTimePicker(e){e&&(this.date=E(new Date(e),Z),this.activeTab="timer")}},watch:{modelValue:function(){this.init()}}};function za(e,t,n,c,f,s){return u(),y(Y,{modelValue:f.display,"onUpdate:modelValue":t[4]||(t[4]=i=>f.display=i),width:n.dialogWidth},{activator:l(({props:i})=>[a(g,$({...n.textFieldProps,...i},{disabled:n.disabled,loading:n.loading,label:n.label,"model-value":s.formattedDatetime,readonly:""}),{loader:l(()=>[Q(e.$slots,"progress",{},()=>[a(X,{color:"primary",indeterminate:"",absolute:"",height:"2"})])]),_:3},16,["disabled","loading","label","model-value"])]),default:l(()=>[a(A,null,{default:l(()=>[a(M,{class:"px-0 py-0"},{default:l(()=>[a(ie,{modelValue:f.activeTab,"onUpdate:modelValue":t[0]||(t[0]=i=>f.activeTab=i)},{default:l(()=>[a(N,{value:"calendar"},{default:l(()=>[Q(e.$slots,"dateIcon",{},()=>[a(b,null,{default:l(()=>[...t[5]||(t[5]=[m("mdi-calendar",-1)])]),_:1})])]),_:3}),a(N,{value:"timer",disabled:s.dateSelected},{default:l(()=>[Q(e.$slots,"timeIcon",{},()=>[a(b,null,{default:l(()=>[...t[6]||(t[6]=[m("mdi-clock-outline",-1)])]),_:1})])]),_:3},8,["disabled"])]),_:3},8,["modelValue"]),a(se,{modelValue:f.activeTab,"onUpdate:modelValue":t[3]||(t[3]=i=>f.activeTab=i)},{default:l(()=>[a(q,{value:"calendar"},{default:l(()=>[a(j,$({modelValue:f.dateValue,"onUpdate:modelValue":t[1]||(t[1]=i=>f.dateValue=i)},n.datePickerProps,{"onUpdate:modelValue":s.showTimePicker}),null,16,["modelValue","onUpdate:modelValue"])]),_:1}),a(q,{value:"timer"},{default:l(()=>[a(Me,$({ref:"timer",modelValue:f.time,"onUpdate:modelValue":t[2]||(t[2]=i=>f.time=i)},n.timePickerProps),null,16,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:3}),a(R,null,{default:l(()=>[a(_),Q(e.$slots,"actions",{parent:this},()=>[a(v,{color:"grey-lighten-1",variant:"text",onClick:s.clearHandler},{default:l(()=>[m(O(n.clearText),1)]),_:1},8,["onClick"]),a(v,{color:"green-darken-1",variant:"text",onClick:s.okHandler},{default:l(()=>[m(O(n.okText),1)]),_:1},8,["onClick"])])]),_:3})]),_:3})]),_:3},8,["modelValue","width"])}const Oa=h(ja,[["render",za]]),Ra={install(e){e.component("v-datetime-picker",Oa)}};function _a(e){e.component("app-layout",st),e.component("toast",dt),e.component("report-card",vt),e.component("program-edition-index",ea),e.component("company-index",fa),e.component("student-index",Aa),e.component("user-index",Fa),e.use(Ra)}const Ma={dark:!1,colors:{...ee}},Ha={thresholds:{xs:0,sm:640,md:768,lg:1024,xl:1280}},Qa=He({components:Ge,directives:Xe,icons:{defaultSet:"mdi",aliases:Ye,sets:{mdi:We}},theme:{defaultTheme:"customTheme",themes:{customTheme:Ma}},display:Ha,locale:{locale:"pt",fallback:"en",messages:{pt:xe,en:Qe}}});k.$http=he;const me=Je({data(){return{token:document.head.querySelector('meta[name="csrf-token"]')?.content}}});me.use(Qa);_a(me);me.provide("eventBus",G);me.mount("#app");
