import{V as d,a as q,c as p,j as I,i as x,b as V,F as N,d as T,f as U,e as L,m as y,g as b,h as B,p as j,k as E,l as F,n as O,o as z}from"./vendor-CZnh5ci3.js";import M from"/images/logo.svg";window.Vue=d;window.axios=q;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";let P=document.head.querySelector('meta[name="csrf-token"]');P&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=P.content);window.Event=new class{constructor(){this.vue=new d}fire(i,...t){this.vue.$emit(i,...t)}listen(i,t){this.vue.$on(i,t)}};window.event=function(i,...t){Event.fire(i,...t)};const h=window.Event,H=[{type:"v-list-item",icon:"mdi-monitor-dashboard",text:"Dashboard",link:"/"},{type:"v-divider"},{type:"v-list-item",icon:"mdi-domain",text:"Companies",link:"/companies",admin:!0},{type:"v-list-item",icon:"mdi-account-edit-outline",text:"Students",link:"/students"},{type:"v-list-item",icon:"mdi-brain",text:"Program editions",link:"/program-editions"},{type:"v-list-item",icon:"mdi-microsoft-excel",text:"Reports",link:"/reports"}],Y=[{type:"v-list-item",icon:"mdi-account-key-outline",text:"User management",link:"/admin/users",admin:!0},{type:"v-list-item",icon:"mdi-account-circle-outline",text:"Logout",link:"/logout"}];function r(i,t,e,a,s,n,f,S){var _=typeof i=="function"?i.options:i;return t&&(_.render=t,_.staticRenderFns=e,_._compiled=!0),{exports:i,options:_}}const Q={props:{isActive:{default:null}},watch:{isActive:function(i){this.drawer=i}},data:()=>({drawer:null,mainRoutes:[],footerRoutes:[]}),mounted:function(){this.mainRoutes=H.filter(i=>!i.admin||this.admin),this.footerRoutes=Y.filter(i=>!i.admin||this.admin)},computed:{auth:function(){return this.$root.$refs.eApp.$options.propsData.auth},admin:function(){return this.auth?.roles?.filter(i=>i.name=="admin").length>0}},methods:{goto(i){i&&(document.location=i)}}};var W=function(){var t=this,e=t._self._c;return e("v-navigation-drawer",{attrs:{fixed:"",app:"",color:"primary"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("div",{staticClass:"tw-mt-16"})]},proxy:!0},{key:"append",fn:function(){return[e("v-list",{attrs:{dense:""}},t._l(t.footerRoutes,function(a,s){return e("div",{key:s},[e("v-list-item",{attrs:{link:""},on:{click:function(n){return n.stopPropagation(),t.goto(a.link)}}},[e("v-list-item-action",[e("v-icon",[t._v(t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.text))])],1)],1)],1)}),0)]},proxy:!0}]),model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[e("v-list",{attrs:{dense:""}},t._l(t.mainRoutes,function(a,s){return e("div",{key:s},[e("v-list-item",{attrs:{link:""},on:{click:function(n){return n.stopPropagation(),t.goto(a.link)}}},[e("v-list-item-action",[e("v-icon",[t._v(t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.text))])],1)],1)],1)}),0)],1)},X=[],G=r(Q,W,X);const J=G.exports,K={components:{NavigationDrawer:J},data:()=>({navigationDrawerIsActive:null}),props:{auth:{type:Object,default:{}}},methods:{toggle(){this.navigationDrawerIsActive=!this.navigationDrawerIsActive}}};var Z=function(){var t=this,e=t._self._c;return e("v-app",{attrs:{id:"training"}},[t.auth?e("navigation-drawer",{ref:"navigationDrawer",attrs:{isActive:t.navigationDrawerIsActive}}):t._e(),e("v-app-bar",{attrs:{app:"",flat:"",height:"78",color:"white"}},[t.auth?e("v-app-bar-nav-icon",{on:{click:function(a){return a.stopPropagation(),t.toggle.apply(null,arguments)}}}):t._e(),e("v-toolbar-title",{staticClass:"tw-w-full"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("div",[e("a",{attrs:{href:"/"}},[e("img",{attrs:{src:M,alt:"Logo"}})])]),e("div",{staticClass:"text-xl tw-mr-6 tw-font-medium tw-uppercase"},[t._v("Training Management")])])])],1),e("v-main",{staticClass:"grey lighten-5"},[t._t("default")],2)],1)},tt=[],et=r(K,Z,tt);const at=et.exports,g={primary:"#74cbc8",secondary:p.black[800],accent:p.gray[600],error:p.red[600],info:p.blue[600],success:p.green[500],warning:p.orange[500],background:"#f2f3f3"},it={data:()=>({visible:!1,text:"",timeout:4e3,type:"info",top:!0,right:!0}),mounted(){Event.listen("toast",({type:i="info",message:t=""}={})=>{this.text=t,this.type=i,this.visible=!0})},computed:{color(){return this.type=="warning"?g.warning:this.type=="error"?g.error:g.primary}}};var st=function(){var t=this,e=t._self._c;return e("v-snackbar",{attrs:{timeout:t.timeout,top:t.top,right:t.right,color:t.color},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[t._v(" "+t._s(t.text)+" "),e("v-btn",{attrs:{color:"blue",text:""},on:{click:function(a){t.snackbar=!1}}},[t._v("Fechar")])],1)},nt=[],rt=r(it,st,nt);const ot=rt.exports,o={info(i){h.fire("toast",{type:"info",message:i})},success(i){h.fire("toast",{type:"success",message:i})},warning(i){h.fire("toast",{type:"warning",message:i})},error(i){h.fire("toast",{type:"error",message:i})}},lt={props:{title:{type:String,default:null},description:{type:String,default:null},report:{type:String,default:null},dateFormat:{type:String,default:"date-range"},beginDate:{type:[Date,null],default:null},endDate:{type:[Date,null],default:null}},data:()=>({loading:!1,year:null,startsAtActive:!1,startsAt:null,endsAtActive:!1,endsAt:null}),computed:{years:function(){const i=new Date().getFullYear();return((e,a,s)=>Array.from({length:(a-e)/s+1},(n,f)=>e+f*s))(i,i-20,-1)},form:function(){return{name:this.report,year:this.year,begin_date:this.startsAt,end_date:this.endsAt}},valid:function(){return this.year||this.startsAt}},methods:{async submit(){try{this.loading=!0;let i=await axios.post(`/reports/${this.report}`,this.form,{responseType:"arraybuffer"});I(i.data,`${this.report}.xlsx`)}catch(i){o.error(i)}finally{this.loading=!1}}},mounted(){this.startsAt=this.beginDate,this.endsAt=this.endDate}};var dt=function(){var t=this,e=t._self._c;return e("v-form",{ref:"form"},[e("v-card",{staticClass:"mx-auto",attrs:{"max-width":"250"}},[e("div",{staticClass:"px-2 tw-text-xl tw-text-center primary tw-text-white",domProps:{textContent:t._s(t.title)}}),e("div",{staticClass:"container py-0"},[t.dateFormat=="date-range"?e("div",[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"none","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g({staticClass:"mt-4",attrs:{label:"From","prepend-inner-icon":"mdi-calendar",readonly:"",dense:!0},model:{value:t.startsAt,callback:function(s){t.startsAt=s},expression:"startsAt"}},a))]}}],null,!1,3972669572),model:{value:t.startsAtActive,callback:function(a){t.startsAtActive=a},expression:"startsAtActive"}},[e("v-date-picker",{on:{input:function(a){t.startsAtActive=!1}},model:{value:t.startsAt,callback:function(a){t.startsAt=a},expression:"startsAt"}})],1),e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"none","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g({attrs:{label:"To","prepend-inner-icon":"mdi-calendar",readonly:"",dense:!0},model:{value:t.endsAt,callback:function(s){t.endsAt=s},expression:"endsAt"}},a))]}}],null,!1,1002119910),model:{value:t.endsAtActive,callback:function(a){t.endsAtActive=a},expression:"endsAtActive"}},[e("v-date-picker",{on:{input:function(a){t.endsAtActive=!1}},model:{value:t.endsAt,callback:function(a){t.endsAt=a},expression:"endsAt"}})],1)],1):t._e(),t.dateFormat=="year"?e("div",[e("v-select",{staticClass:"mt-4",attrs:{"prepend-inner-icon":"mdi-calendar",items:t.years,label:"Year"},model:{value:t.year,callback:function(a){t.year=a},expression:"year"}})],1):t._e()]),e("div",{staticClass:"container tw-text-xs"},[t._v(t._s(t.description))]),e("v-card-actions",[e("v-spacer"),e("v-btn",{staticClass:"primary",attrs:{icon:"",loading:t.loading,disabled:t.loading||!t.valid},on:{click:t.submit}},[e("v-icon",[t._v("mdi-microsoft-excel")])],1)],1)],1)],1)},ct=[],ut=r(lt,dt,ct);const mt=ut.exports,w={props:["items","totalItems"],data:()=>({list:[],totalList:0,options:{},editedIndex:-1,isLoading:!1,isSaving:!1,createVisible:!1}),created(){this.list=this.items.map(i=>this.instance(i)),this.totalList=this.totalItems||this.list.length},methods:{instance(i){throw Error("Instance method must be defined in parent")},newItem(){this.editedIndex=-1,this.editedItem=this.instance(),this.createVisible=!0},editItem(i){this.editedIndex=this.list.indexOf(i),this.editedItem=i.clone(),this.createVisible=!0},async deleteItem(i){const t=this.list.indexOf(i);if(confirm("Are you sure?"))try{i.delete(),this.list.splice(t,1)}catch(e){o.error(e)}},saved(i){this.editedIndex>-1?Object.assign(this.list[this.editedIndex],i):this.list.push(i),this.close()},close(){}},watch:{options:{async handler(i,t){if(t.page){this.isLoading=!0;try{const{data:e,meta:a}=await this.instance().fetch(i);this.list=e,this.totalList=a.total}catch{this.list=[],this.totalList=0}finally{this.isLoading=!1}}},deep:!0}}},vt={};var pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-data-table tw-flex tw-flex-col tw-mt-10 tw-mx-20"},[t._t("default")],2)},ft=[],_t=r(vt,pt,ft);const k=_t.exports,ht={name:"add-program-dialog",model:{prop:"selectedProgram",event:"input"},props:{visible:{type:Boolean,default:!1},existingPrograms:{type:Array,default:()=>[]}},data(){return{selectedProgram:null,isSaving:!1}},computed:{show:{get(){return this.visible},set(i){i||this.$emit("close")}},isSaveDisabled(){return this.selectedProgram===null||this.selectedProgram==""},commitButton(){return x(this.selectedProgram)?"Ok":"Save"}},methods:{async save(){if(!this.selectedProgram){this.cancel();return}if(x(this.selectedProgram)){this.close(),this.$emit("input",{id:this.selectedProgram.value,name:this.selectedProgram.text});return}this.isSaving=!0;try{let i=await axios.post("/programs",{name:this.selectedProgram});this.cancel(),this.$emit("input",i.data)}catch(i){this.isSaving=!1,console.warn(i?.response?.data?.errors),o.error(i)}},cancel(){this.close(),this.selectedProgram=null},close(){this.show=!1}}};var bt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("v-card",{attrs:{loading:t.isSaving}},[e("v-card-title",[t._v(" Add program name ")]),e("v-card-text",[e("v-combobox",{attrs:{items:t.existingPrograms},model:{value:t.selectedProgram,callback:function(a){t.selectedProgram=a},expression:"selectedProgram"}})],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.cancel}},[t._v("Cancel")]),e("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.isSaveDisabled},on:{click:t.save}},[t._v(t._s(t.commitButton))])],1)],1)],1)},gt=[],xt=r(ht,bt,gt);const yt=xt.exports,wt=()=>{const i=new WeakSet;return(t,e)=>{if(x(e)&&e!==null){if(i.has(e))return;i.add(e)}return e}};class l extends V.Model{constructor(t){t?super(t):super()}baseURL(){return""}request(t){return this.$http.request({transformRequest:[e=>x(e)?JSON.parse(JSON.stringify(e,wt())):e,...this.$http.defaults.transformRequest],...t})}async fetch(t){const e=t.sortBy.map((f,S)=>(t.sortDesc[S]?"-":"")+f),a=t.page||1,s=t.itemsPerPage||10;return await this.orderBy(e).page(a).limit(s).get()}export(t){const e=new URLSearchParams(t).toString(),a=`/${this.resource()}/${this.id}/export?${e}`,s=`${this.id}.${t.format}`;N.saveAs(a,s)}clone(){return T(this)}}class u extends l{resource(){return"students"}}const kt={name:"program-edition-create-students",props:{programEdition:{type:l,default:function(){return new ProgramEdition}},students:{type:Array,default:[]}},data:()=>({isLoading:!1,search:null,studentsFromQuery:[],student:null}),computed:{rules(){return{hours_attended:[i=>i>=0||"O valor deve numérico e positivo"]}}},methods:{addStudent(){let i=T(this.student);i.pivot={hours_attended:null},this.$emit("add",new u(i)),this.search=null,this.studentsFromQuery=[],this.student=null},deleteStudent(i){this.$emit("delete",i)}},watch:{programEdition(i){this.student=null,this.studentsFromQuery=[]},async search(i){if(!this.isLoading){this.isLoading=!0,this.studentsFromQuery=[];try{const{data:t}=await u.orderBy("name").get();this.studentsFromQuery=U(t,e=>L(this.students,{id:e.id})<0)}catch(t){o.error(t)}finally{this.isLoading=!1}}}}};var $t=function(){var t=this,e=t._self._c;return e("v-card",[e("v-card-text",[e("div",{staticClass:"tw-flex tw-items-baseline"},[e("div",{staticClass:"tw-flex-1"},[e("v-autocomplete",{attrs:{items:t.studentsFromQuery,loading:t.isLoading,"search-input":t.search,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"id",label:"Students",placeholder:"Student name","prepend-icon":"mdi-database-search","return-object":""},on:{"update:searchInput":function(a){t.search=a},"update:search-input":function(a){t.search=a}},model:{value:t.student,callback:function(a){t.student=a},expression:"student"}})],1),e("v-btn",{staticClass:"tw-ml-2",attrs:{disabled:!t.student,fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(a){return t.addStudent()}}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1)],1),t.students.length>0?e("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Name")]),e("th",{staticClass:"text-left"},[t._v("Hours")]),e("th",{staticClass:"text-left"},[t._v(" ")])])]),e("tbody",t._l(t.students,function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.name))]),e("td",[e("v-text-field",{staticClass:"hours_attended",attrs:{rules:t.rules.hours_attended,dense:"",placeholder:"You only need to fill if the number of hours is different from the program edition"},model:{value:a.pivot.hours_attended,callback:function(n){t.$set(a.pivot,"hours_attended",n)},expression:"student.pivot.hours_attended"}})],1),e("td",[e("v-btn",{staticClass:"tw-ml-2 tw--mt-2",attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(n){return t.deleteStudent(s)}}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1)],1)])}),0)]},proxy:!0}],null,!1,3264009096)}):t._e()],1)],1)},Ct=[],St=r(kt,$t,Ct);const Et=St.exports,Pt={props:{programEdition:{type:l,required:!0}},data:()=>({isExporting:!1,cover:!0,students:!0}),methods:{exportExcel(){this.isExporting=!0;try{this.programEdition.export({cover:this.cover,students:this.students})}catch(i){o.warning(i)}finally{this.isExporting=!1}},async reports(i){this.isExporting=!0;try{let t=await axios.post(`/reports/${i}`,{name:i,program_edition_id:this.programEdition.id},{responseType:"arraybuffer"});I(t.data,`${i}.xlsx`)}catch(t){o.warning(t)}finally{this.isExporting=!1}}}};var At=function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"mt-10 warning tw-text-center tw-text-white tw-font-mono tw-rounded"},[t._v("The export is based on the server data. You need to save before exporting.")]),e("div",{staticClass:"mt-10 container tw-flex tw-justify-between tw-items-end"},[e("div",[e("v-switch",{attrs:{label:"Global data"},model:{value:t.cover,callback:function(a){t.cover=a},expression:"cover"}}),e("v-switch",{attrs:{label:"Students information"},model:{value:t.students,callback:function(a){t.students=a},expression:"students"}})],1),e("div",[e("v-btn",{attrs:{color:"primary darken-1",loading:t.isExporting,disabled:!t.cover&&!t.students},on:{click:t.exportExcel}},[t._v("Export")])],1)]),t._m(0),e("div",{staticClass:"tw-mt-8 tw-flex"},[e("v-btn",{staticClass:"tw-mx-auto",attrs:{color:"primary darken-1",loading:t.isExporting},on:{click:function(a){return t.reports("evaluation")}}},[t._v("Training assessment report")])],1)])},Dt=[function(){var i=this,t=i._self._c;return t("div",{staticClass:"tw-mt-8 tw-flex"},[t("div",{staticClass:"tw-mx-auto"},[i._v(" Reports ")])])}],It=r(Pt,At,Dt);const Vt=It.exports;class Tt extends l{resource(){return"programs"}}class Ft extends l{resource(){return"enrollments"}}class c extends l{resource(){return"companies"}}let v=class extends l{resource(){return"program-editions"}students(){return this.hasMany(u)}};class Rt extends l{id=null;program_edition_id=null;starts_at=null;ends_at=null;interval_start=null;interval_minutes=null}const qt={name:"program-edition-create",components:{AddProgramDialog:yt,StudentsTab:Et,ExportTab:Vt},model:{prop:"programEdition",event:"input"},props:{programEdition:{type:l,default:function(){return new v}},visible:{type:Boolean}},data:()=>({dataProgramEdition:new v,isSaving:!1,companies:[],programs:[],students:[],startsAtActive:!1,endsAtActive:!1,addProgramDialogVisible:!1,evaluationNotificationDateActive:!1,tab:null}),computed:{dataVisible:{get(){return this.visible},set(i){i||(this.$emit("close"),this.tab=null,this.dataProgramEdition=new v)}},isSaveDisabled(){return!this.dataProgramEdition.name||this.isSaving},rules(){return{name:[i=>!!i||"The field should have a value."],program_id:[i=>!!i||"The field should have a value."]}},managerName(){return this.dataProgramEdition.manager?.name}},methods:{close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{this.dataProgramEdition.enrollments=this.students.map(t=>new Ft({id:t.pivot.id,student_id:t.id,program_edition_id:this.dataProgramEdition.id,company_id:t.current_company_id,hours_attended:t.pivot.hours_attended}))||[];let i=await this.dataProgramEdition.save();this.dataProgramEdition=new v,this.isSaving=!1,this.close(),this.$emit("input",i),this.$emit("saved",i)}catch(i){this.isSaving=!1,o.error(i)}},selectProgramId(i){i&&(this.programs.push({text:i.name,value:i.id}),this.dataProgramEdition.program_id=i.id)},addSchedule(){this.dataProgramEdition.schedules.push(new Rt)},deleteSchedule(i){this.dataProgramEdition.schedules.splice(i,1)},updateEvaluationNotificationDate(i){(!this.dataProgramEdition.evaluation_notification_date||!this.dataProgramEdition.id)&&(this.dataProgramEdition.evaluation_notification_date=b(B(j(this.dataProgramEdition.ends_at),6),"yyyy-LL-dd"))},async getStudents(){if(this.students=[],!!this.programEdition.id){this.isSaving=!0;try{let i=await this.programEdition.students().get();this.students=i||[]}catch(i){o.error(i)}finally{this.isSaving=!1}}},async getPrograms(){try{let i=await Tt.get();this.programs=y(i,t=>({text:t.name,value:t.id}))}catch(i){o.error(i)}},async getCompanies(){try{let i=await c.get();this.companies=y(i,t=>({text:t.name,value:t.id}))}catch(i){o.error(i)}}},watch:{programEdition:function(i){this.dataProgramEdition=i,this.getStudents()},visible:function(i){this.dataVisible=i}},mounted:async function(){this.getPrograms(),this.getCompanies()}};var Nt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","max-width":"48rem"},on:{keydown:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.dataVisible=!1}},model:{value:t.dataVisible,callback:function(a){t.dataVisible=a},expression:"dataVisible"}},[e("v-card",{staticClass:"px-5 py-5 vert-card",attrs:{loading:t.isSaving,height:"90vh"}},[e("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab",{key:"programEdition"},[t._v("Program edition")]),e("v-tab",{key:"students"},[t._v("Students")]),t.dataProgramEdition.id?e("v-tab",{key:"export"},[t._v("Export")]):t._e()],1),e("v-tabs-items",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",{key:"programEdition"},[e("v-card",[e("v-card-text",[e("div",{staticClass:"tw-flex"},[e("div",{staticClass:"tw-flex tw-flex-row tw-justify-center tw-items-center tw-w-2/3"},[e("v-select",{staticClass:"tw-w-8/12",attrs:{items:t.programs,label:"Program name",required:"",rules:t.rules.program_id},on:{input:function(a){t.dataProgramEdition.program_id=a}},model:{value:t.dataProgramEdition.program_id,callback:function(a){t.$set(t.dataProgramEdition,"program_id",a)},expression:"dataProgramEdition.program_id"}}),e("v-btn",{staticClass:"tw--mt-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(a){t.addProgramDialogVisible=!0}}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1),e("add-program-dialog",{attrs:{"existing-programs":t.programs,visible:t.addProgramDialogVisible},on:{close:function(a){t.addProgramDialogVisible=!1},input:function(a){return t.selectProgramId(a)}}})],1),e("v-text-field",{staticClass:"ml-4 tw-w-1/3",attrs:{label:"Edition name",required:"",rules:t.rules.name},model:{value:t.dataProgramEdition.name,callback:function(a){t.$set(t.dataProgramEdition,"name",a)},expression:"dataProgramEdition.name"}})],1),e("div",{staticClass:"tw-flex tw-flex-row tw-justify-center tw-items-center"},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g({attrs:{label:"Starts at","prepend-inner-icon":"mdi-calendar",readonly:"",rules:t.rules.starts_at},model:{value:t.dataProgramEdition.starts_at,callback:function(s){t.$set(t.dataProgramEdition,"starts_at",s)},expression:"dataProgramEdition.starts_at"}},a))]}}]),model:{value:t.startsAtActive,callback:function(a){t.startsAtActive=a},expression:"startsAtActive"}},[e("v-date-picker",{on:{input:function(a){t.startsAtActive=!1}},model:{value:t.dataProgramEdition.starts_at,callback:function(a){t.$set(t.dataProgramEdition,"starts_at",a)},expression:"dataProgramEdition.starts_at"}})],1),e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g({staticClass:"tw-ml-2",attrs:{label:"Ends at","prepend-inner-icon":"mdi-calendar",readonly:"",rules:t.rules.ends_at},model:{value:t.dataProgramEdition.ends_at,callback:function(s){t.$set(t.dataProgramEdition,"ends_at",s)},expression:"dataProgramEdition.ends_at"}},a))]}}]),model:{value:t.endsAtActive,callback:function(a){t.endsAtActive=a},expression:"endsAtActive"}},[e("v-date-picker",{on:{input:[function(a){t.endsAtActive=!1},function(a){return t.updateEvaluationNotificationDate(a)}]},model:{value:t.dataProgramEdition.ends_at,callback:function(a){t.$set(t.dataProgramEdition,"ends_at",a)},expression:"dataProgramEdition.ends_at"}})],1),e("v-select",{staticClass:"tw-ml-2 tw-w-6/12",attrs:{items:t.companies,label:"Company",required:"",rules:t.rules.company_id},on:{input:function(a){t.dataProgramEdition.company_id=a}},model:{value:t.dataProgramEdition.company_id,callback:function(a){t.$set(t.dataProgramEdition,"company_id",a)},expression:"dataProgramEdition.company_id"}}),e("v-text-field",{staticClass:"tw-ml-2 tw-w-1/6 money",attrs:{label:"Cost",required:"",rules:t.rules.cost,prefix:"€"},model:{value:t.dataProgramEdition.cost,callback:function(a){t.$set(t.dataProgramEdition,"cost",a)},expression:"dataProgramEdition.cost"}})],1),e("div",{staticClass:"tw-flex tw-flex-row tw-justify-center tw-items-center"},[e("v-text-field",{attrs:{label:"Supplier",required:"",rules:t.rules.supplier},model:{value:t.dataProgramEdition.supplier,callback:function(a){t.$set(t.dataProgramEdition,"supplier",a)},expression:"dataProgramEdition.supplier"}}),e("v-text-field",{staticClass:"ml-2",attrs:{label:"Certifications",required:"",rules:t.rules.supplier_certifications},model:{value:t.dataProgramEdition.supplier_certifications,callback:function(a){t.$set(t.dataProgramEdition,"supplier_certifications",a)},expression:"dataProgramEdition.supplier_certifications"}}),e("v-text-field",{staticClass:"ml-2",attrs:{label:"Teacher name",required:"",rules:t.rules.teacher_name},model:{value:t.dataProgramEdition.teacher_name,callback:function(a){t.$set(t.dataProgramEdition,"teacher_name",a)},expression:"dataProgramEdition.teacher_name"}})],1),e("div",{staticClass:"tw-flex tw-flex-row tw-justify-center tw-items-center"},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g({attrs:{label:"Notify accessment to","prepend-inner-icon":"mdi-calendar",readonly:"",rules:t.rules.evaluation_notification_date},model:{value:t.dataProgramEdition.evaluation_notification_date,callback:function(s){t.$set(t.dataProgramEdition,"evaluation_notification_date",s)},expression:"dataProgramEdition.evaluation_notification_date"}},a))]}}]),model:{value:t.evaluationNotificationDateActive,callback:function(a){t.evaluationNotificationDateActive=a},expression:"evaluationNotificationDateActive"}},[e("v-date-picker",{on:{input:function(a){t.evaluationNotificationDateActive=!1}},model:{value:t.dataProgramEdition.evaluation_notification_date,callback:function(a){t.$set(t.dataProgramEdition,"evaluation_notification_date",a)},expression:"dataProgramEdition.evaluation_notification_date"}})],1),e("v-text-field",{staticClass:"tw-ml-2 tw-w-3/4",attrs:{label:"Training goals",required:"",rules:t.rules.goals},model:{value:t.dataProgramEdition.goals,callback:function(a){t.$set(t.dataProgramEdition,"goals",a)},expression:"dataProgramEdition.goals"}})],1),e("div",{staticClass:"tw-mt-2"},[e("span",{staticClass:"subtitle-1"},[t._v("Schedules")]),e("v-btn",{staticClass:"tw-ml-2 tw--mt-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:t.addSchedule}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1)],1),t._l(t.dataProgramEdition.schedules,function(a,s){return e("div",{key:s,staticClass:"tw-flex"},[e("div",{staticClass:"tw-w-1/4"},[e("v-datetime-picker",{attrs:{label:"Start",timeFormat:"HH:mm"},model:{value:a.starts_at,callback:function(n){t.$set(a,"starts_at",n)},expression:"schedule.starts_at"}})],1),e("div",{staticClass:"tw-w-1/4 tw-ml-2"},[e("v-datetime-picker",{attrs:{label:"End",timeFormat:"HH:mm"},model:{value:a.ends_at,callback:function(n){t.$set(a,"ends_at",n)},expression:"schedule.ends_at"}})],1),e("div",{staticClass:"tw-w-1/4 tw-ml-2"},[e("v-datetime-picker",{attrs:{label:"Break start",timeFormat:"HH:mm"},model:{value:a.interval_start,callback:function(n){t.$set(a,"interval_start",n)},expression:"schedule.interval_start"}})],1),e("div",{staticClass:"tw-w-20/100 tw-ml-2"},[e("v-text-field",{attrs:{label:"Break minutes"},model:{value:a.interval_minutes,callback:function(n){t.$set(a,"interval_minutes",n)},expression:"schedule.interval_minutes"}})],1),e("div",{staticClass:"tw-w-5/100 tw-ml-2 tw-flex tw-items-center"},[e("v-btn",{staticClass:"tw-ml-2 tw--mt-2",attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(n){return t.deleteSchedule(s)}}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1)],1)])})],2)],1)],1),e("v-tab-item",{key:"students"},[e("students-tab",{attrs:{students:t.students,"program-edition":t.dataProgramEdition},on:{add:function(a){return t.students.push(a)},delete:function(a){return t.students.splice(a,1)}}})],1),t.dataProgramEdition.id?e("v-tab-item",{key:"export"},[e("export-tab",{attrs:{"program-edition":t.dataProgramEdition}})],1):t._e()],1),e("v-card-actions",[e("v-spacer"),e("v-text-field",{attrs:{label:"Created by",disabled:!0},model:{value:t.managerName,callback:function(a){t.managerName=a},expression:"managerName"}}),e("v-btn",{staticClass:"ml-2",attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e("v-btn",{staticClass:"ml-2",attrs:{color:"blue darken-1",text:"",disabled:t.isSaveDisabled},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},Ut=[],Lt=r(qt,Nt,Ut);const Bt=Lt.exports,jt={mixins:[w],components:{createDialog:Bt,cDataTable:k},data:()=>({headers:[{text:"Program",align:"start",sortable:!0,value:"program.name"},{text:"Edition",align:"start",sortable:!0,value:"name"},{text:"Start date",align:"start",sortable:!0,value:"starts_at"},{text:"End date",align:"start",sortable:!0,value:"ends_at"},{text:"Students",align:"start",sortable:!0,value:"students_count"},{text:"Actions",value:"actions",sortable:!1}],editedItem:new v,defaultItem:new v}),methods:{instance(i){return new v(i)},newProgramEdition(){this.editedItem=this.defaultItem,this.createVisible=!0}}};var Ot=function(){var t=this,e=t._self._c;return e("c-data-table",[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length > 0"}],staticClass:"mb-10 tw-self-end",attrs:{color:"primary",dark:""},on:{click:function(a){return a.stopPropagation(),t.newProgramEdition.apply(null,arguments)}}},[t._v("New Program Edition")]),e("create-dialog",{attrs:{visible:t.createVisible},on:{saved:function(a){return t.saved(a)},close:function(a){t.createVisible=!1}},model:{value:t.editedItem,callback:function(a){t.editedItem=a},expression:"editedItem"}}),t.list.length?e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,"fixed-header":!0,items:t.list,options:t.options,"server-items-length":t.totalItems,loading:t.isLoading,"sort-by":"name"},on:{"update:options":function(a){t.options=a}},scopedSlots:t._u([{key:"item.actions",fn:function({item:a}){return[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(s){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e("v-icon",{attrs:{small:""},on:{click:function(s){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!1,3840325745)}):e("div",{staticClass:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"},[e("h1",{staticClass:"tw-font-bold tw-text-lg"},[t._v("No program editions yet.")]),e("v-btn",{staticClass:"mt-10 tw-block",attrs:{color:"primary",dark:""},on:{click:function(a){t.createVisible=!0}}},[t._v("New Program Edition")])],1)],1)},zt=[],Mt=r(jt,Ot,zt);const Ht=Mt.exports;class Yt extends l{}class R extends l{resource(){return"admin/roles"}}class m extends l{resource(){return"admin/users"}roles(){return this.hasMany(R)}}const Qt={name:"company-create",model:{prop:"company",event:"input"},props:{company:{type:l,default:function(){return new c}},visible:{type:Boolean}},data:()=>({dataCompany:new c,isSaving:!1,users:[]}),computed:{dataVisible:{get(){return this.visible},set(i){i||(this.$emit("close"),this.dataCompany=new c)}},isSaveDisabled(){return!this.dataCompany.name||!this.dataCompany.vat_number||this.isSaving},rules(){return{name:[i=>!!i||"The field should have a value."],vat_number:[i=>!!i||"The field should have a value."]}}},methods:{addBudget(){this.dataCompany.budgets.push(new Yt)},deleteBudget(i){this.dataCompany.budgets.splice(i,1)},close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{let i=await this.dataCompany.save();this.isSaving=!1,this.close(),this.$emit("input",i),this.$emit("saved",i)}catch(i){this.isSaving=!1,o.error(i)}},async getUsers(){try{let i=await m.limit(999).$get();this.users=y(i,t=>({text:t.name,value:t.id}))}catch(i){o.error(i)}}},watch:{company:function(i){this.dataCompany=new c({budgets:[],...i})},visible:function(i){this.dataVisible=i}},mounted:async function(){this.getUsers()}};var Wt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"max-width":"500px"},on:{keydown:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.dataVisible=!1}},model:{value:t.dataVisible,callback:function(a){t.dataVisible=a},expression:"dataVisible"}},[e("v-card",{staticClass:"px-5 py-5",attrs:{loading:t.isSaving,height:"90vh"}},[e("v-card-title",[e("span",{staticClass:"headline"},[t._v("Company")])]),e("v-card-text",{staticClass:"mt-5"},[e("v-text-field",{attrs:{autofocus:"",label:"Name",required:"",rules:t.rules.name},model:{value:t.dataCompany.name,callback:function(a){t.$set(t.dataCompany,"name",a)},expression:"dataCompany.name"}}),e("div",{staticClass:"tw-flex"},[e("v-text-field",{staticClass:"tw-w-1/2",attrs:{label:"Short name",required:"",rules:t.rules.short_name},model:{value:t.dataCompany.short_name,callback:function(a){t.$set(t.dataCompany,"short_name",a)},expression:"dataCompany.short_name"}}),e("v-text-field",{staticClass:"tw-w-1/2 tw-ml-2",attrs:{label:"VAT Number",required:"",rules:t.rules.vat_number},model:{value:t.dataCompany.vat_number,callback:function(a){t.$set(t.dataCompany,"vat_number",a)},expression:"dataCompany.vat_number"}})],1),e("div",[e("v-select",{attrs:{items:t.users,label:"Local coordinator",required:""},on:{input:function(a){t.dataCompany.coordinator_id=a}},model:{value:t.dataCompany.coordinator_id,callback:function(a){t.$set(t.dataCompany,"coordinator_id",a)},expression:"dataCompany.coordinator_id"}})],1),e("div",{staticClass:"mt-2"},[e("span",{staticClass:"subtitle-1"},[t._v("Budgets")]),e("v-btn",{staticClass:"tw-ml-2 tw--mt-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:t.addBudget}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1)],1),t._l(t.dataCompany.budgets,function(a,s){return e("div",{key:s,staticClass:"tw-flex"},[e("div",{staticClass:"tw-w-1/2"},[e("v-text-field",{attrs:{label:"Year"},model:{value:a.year,callback:function(n){t.$set(a,"year",n)},expression:"yearBudget.year"}})],1),e("div",{staticClass:"tw-ml-2"},[e("v-text-field",{staticClass:"money",attrs:{label:"Budget",prefix:"€"},model:{value:a.budget,callback:function(n){t.$set(a,"budget",n)},expression:"yearBudget.budget"}})],1),e("div",{staticClass:"tw-w-5/100 tw-ml-2 tw-flex tw-items-center"},[e("v-btn",{staticClass:"tw-ml-2 tw--mt-2",attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(n){return t.deleteBudget(s)}}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1)],1)])})],2),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.isSaveDisabled},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},Xt=[],Gt=r(Qt,Wt,Xt);const Jt=Gt.exports,Kt={mixins:[w],components:{createDialog:Jt,cDataTable:k},data:()=>({headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Coordinator",align:"start",sortable:!0,value:"coordinator.name"},{text:"VAT Number",align:"start",sortable:!0,value:"vat_number"},{text:"Actions",value:"actions",sortable:!1}],defaultItem:new c,editedItem:new c,createVisible:!1}),methods:{instance(i){return new c(i)}}};var Zt=function(){var t=this,e=t._self._c;return e("c-data-table",[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length > 0"}],staticClass:"mb-10 tw-self-end",attrs:{color:"primary",dark:""},on:{click:function(a){return a.stopPropagation(),t.newItem.apply(null,arguments)}}},[t._v("New Company")]),e("create-dialog",{attrs:{visible:t.createVisible},on:{saved:function(a){return t.saved(a)},close:function(a){t.createVisible=!1}},model:{value:t.editedItem,callback:function(a){t.editedItem=a},expression:"editedItem"}}),t.list.length?e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,"fixed-header":!0,items:t.list,"sort-by":"name"},scopedSlots:t._u([{key:"item.actions",fn:function({item:a}){return[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(s){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e("v-icon",{attrs:{small:""},on:{click:function(s){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!1,3840325745)}):e("div",{staticClass:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"},[e("h1",{staticClass:"tw-font-bold tw-text-lg"},[t._v("No companies yet.")]),e("v-btn",{staticClass:"mt-10 tw-block",attrs:{color:"primary",dark:""},on:{click:function(a){t.createVisible=!0}}},[t._v("New Company")])],1)],1)},te=[],ee=r(Kt,Zt,te);const ae=ee.exports,ie={props:{student:{type:l,required:!0}},data:()=>({isExporting:!1,cover:!0,programEditions:!0}),methods:{exportExcel(){this.isExporting=!0;try{this.student.export({cover:this.cover,program_editions:this.programEditions})}catch(i){o.warning(i)}finally{this.isExporting=!1}}}};var se=function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"mt-10 warning tw-text-center tw-text-white tw-font-mono tw-rounded"},[t._v("The export is based on the server data. You need to save before exporting.")]),e("div",{staticClass:"mt-10 container tw-flex tw-justify-between tw-items-end"},[e("div",[e("v-switch",{attrs:{label:"Global data"},model:{value:t.cover,callback:function(a){t.cover=a},expression:"cover"}}),e("v-switch",{attrs:{label:"Program edition informations"},model:{value:t.programEditions,callback:function(a){t.programEditions=a},expression:"programEditions"}})],1),e("div",[e("v-btn",{attrs:{color:"primary darken-1",loading:t.isExporting,disabled:!t.cover&&!t.programEditions},on:{click:t.exportExcel}},[t._v("Export")])],1)])])},ne=[],re=r(ie,se,ne);const oe=re.exports,le={name:"student-create",components:{ExportTab:oe},model:{prop:"student",event:"input"},props:{student:{type:l,default:function(){return new u}},visible:{type:Boolean}},data:()=>({dataStudent:new u,isSaving:!1,citizenIdValidityDatePickerActive:!1,companies:[],tab:null}),computed:{dataVisible:{get(){return this.visible},set(i){i||(this.$emit("close"),this.dataStudent=new u)}},isSaveDisabled(){return!this.dataStudent.name||!this.dataStudent.current_company_id||this.isSaving},rules(){return{name:[i=>!!i||"The field should have a value."],vat_number:[i=>!!i||"The field should have a value."]}},rgpd(){return this.student.hasOwnProperty("citizen_id")&&this.student.hasOwnProperty("citizen_id_validity")}},methods:{close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{let i=await this.dataStudent.save();this.isSaving=!1,this.close(),this.$emit("input",i),this.$emit("saved",i)}catch(i){this.isSaving=!1,o.error(i)}}},watch:{student:function(i){this.dataStudent=i},visible:function(i){this.dataVisible=i}},mounted:async function(){try{let i=await c.get();this.companies=y(i,t=>({text:t.name,value:t.id}))}catch(i){o.error(i)}}};var de=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{scrollable:"","max-width":"48rem"},on:{keydown:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.dataVisible=!1}},model:{value:t.dataVisible,callback:function(a){t.dataVisible=a},expression:"dataVisible"}},[e("v-card",{staticClass:"px-5 py-5 vert-card",attrs:{loading:t.isSaving,height:"90vh"}},[e("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab",{key:"student"},[t._v("Student")]),t.student.id?e("v-tab",{key:"export"},[t._v("Export")]):t._e()],1),e("v-tabs-items",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",{key:"student"},[e("v-card",[e("v-card-text",{staticClass:"mt-5"},[e("v-text-field",{attrs:{autofocus:"",label:"Name","prepend-icon":"mdi-account-edit-outline",required:"",rules:t.rules.name},model:{value:t.dataStudent.name,callback:function(a){t.$set(t.dataStudent,"name",a)},expression:"dataStudent.name"}}),e("v-text-field",{attrs:{label:"Address","prepend-icon":"mdi-map-marker",required:"",rules:t.rules.address},model:{value:t.dataStudent.address,callback:function(a){t.$set(t.dataStudent,"address",a)},expression:"dataStudent.address"}}),e("div",{staticClass:"tw-flex"},[e("v-text-field",{staticClass:"tw-w-1/4",attrs:{label:"Postal C.","prepend-icon":"mdi-city",required:"",rules:t.rules.postal_code},model:{value:t.dataStudent.postal_code,callback:function(a){t.$set(t.dataStudent,"postal_code",a)},expression:"dataStudent.postal_code"}}),e("v-text-field",{staticClass:"tw-w-3/4 tw-ml-2",attrs:{label:"City","prepend-icon":"mdi-city",required:"",rules:t.rules.city},model:{value:t.dataStudent.city,callback:function(a){t.$set(t.dataStudent,"city",a)},expression:"dataStudent.city"}})],1),t.rgpd?e("div",{staticClass:"tw-flex"},[e("v-text-field",{staticClass:"tw-w-3/4",attrs:{label:"Citizen card","prepend-icon":"mdi-card-account-details-outline",required:"",rules:t.rules.citizen_id},model:{value:t.dataStudent.citizen_id,callback:function(a){t.$set(t.dataStudent,"citizen_id",a)},expression:"dataStudent.citizen_id"}}),e("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g({staticClass:"tw-w-1/4 tw-ml-2",attrs:{label:"Validity","prepend-icon":"mdi-calendar",readonly:"",rules:t.rules.citizen_id_validity},model:{value:t.dataStudent.citizen_id_validity,callback:function(s){t.$set(t.dataStudent,"citizen_id_validity",s)},expression:"dataStudent.citizen_id_validity"}},a))]}}],null,!1,1083999961),model:{value:t.citizenIdValidityDatePickerActive,callback:function(a){t.citizenIdValidityDatePickerActive=a},expression:"citizenIdValidityDatePickerActive"}},[e("v-date-picker",{on:{input:function(a){t.citizenIdValidityDatePickerActive=!1}},model:{value:t.dataStudent.citizen_id_validity,callback:function(a){t.$set(t.dataStudent,"citizen_id_validity",a)},expression:"dataStudent.citizen_id_validity"}})],1)],1):t._e(),e("v-text-field",{attrs:{label:"E-mail",type:"email","prepend-icon":"mdi-email-outline",required:"",rules:t.rules.email},model:{value:t.dataStudent.email,callback:function(a){t.$set(t.dataStudent,"email",a)},expression:"dataStudent.email"}}),t.rgpd?e("div",{staticClass:"tw-flex"},[e("v-text-field",{attrs:{label:"Birth place","prepend-icon":"mdi-map-marker",required:"",rules:t.rules.birth_place},model:{value:t.dataStudent.birth_place,callback:function(a){t.$set(t.dataStudent,"birth_place",a)},expression:"dataStudent.birth_place"}}),e("v-text-field",{staticClass:"tw-ml-2",attrs:{label:"Birth country","prepend-icon":"mdi-map-marker",required:"",rules:t.rules.nationality},model:{value:t.dataStudent.nationality,callback:function(a){t.$set(t.dataStudent,"nationality",a)},expression:"dataStudent.nationality"}})],1):t._e(),e("v-divider",{staticClass:"tw-my-4",attrs:{dark:""}}),e("v-select",{attrs:{items:t.companies,label:"Company","prepend-icon":"mdi-factory",required:"",rules:t.rules.company},on:{input:function(a){t.dataStudent.current_company_id=a}},model:{value:t.dataStudent.current_company_id,callback:function(a){t.$set(t.dataStudent,"current_company_id",a)},expression:"dataStudent.current_company_id"}}),e("v-text-field",{attrs:{label:"Job title","prepend-icon":"mdi-barcode-scan",required:"",rules:t.rules.current_job_title},model:{value:t.dataStudent.current_job_title,callback:function(a){t.$set(t.dataStudent,"current_job_title",a)},expression:"dataStudent.current_job_title"}})],1)],1)],1),e("v-tab-item",{key:"export"},[e("export-tab",{attrs:{student:t.dataStudent}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.isSaveDisabled},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},ce=[],ue=r(le,de,ce);const me=ue.exports,ve={mixins:[w],components:{createDialog:me,cDataTable:k},data:()=>({headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Company",align:"start",sortable:!0,value:"company.name"},{text:"Actions",value:"actions",sortable:!1}],editedItem:new u,defaultItem:new u,createVisible:!1}),methods:{instance(i){return new u(i)}}};var pe=function(){var t=this,e=t._self._c;return e("c-data-table",[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length > 0"}],staticClass:"mb-10 tw-self-end",attrs:{color:"primary",dark:""},on:{click:function(a){return a.stopPropagation(),t.newItem.apply(null,arguments)}}},[t._v("Add student")]),e("create-dialog",{attrs:{visible:t.createVisible},on:{saved:function(a){return t.saved(a)},close:function(a){t.createVisible=!1}},model:{value:t.editedItem,callback:function(a){t.editedItem=a},expression:"editedItem"}}),t.list.length?e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,"fixed-header":!0,items:t.list,options:t.options,"server-items-length":t.totalItems,loading:t.isLoading,"sort-by":"name"},on:{"update:options":function(a){t.options=a}},scopedSlots:t._u([{key:"item.actions",fn:function({item:a}){return[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(s){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e("v-icon",{attrs:{small:""},on:{click:function(s){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!1,3840325745)}):e("div",{staticClass:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"},[e("h1",{staticClass:"tw-font-bold tw-text-lg"},[t._v("No students yet.")]),e("v-btn",{staticClass:"mt-10 tw-block",attrs:{color:"primary",dark:""},on:{click:function(a){t.createVisible=!0}}},[t._v("Add student")])],1)],1)},fe=[],_e=r(ve,pe,fe);const he=_e.exports,be={name:"user-create",model:{prop:"user",event:"input"},props:{user:{type:l,default:function(){return new m}},visible:{type:Boolean}},data:()=>({dataUser:new m,isSaving:!1,roles:[],tab:null}),computed:{dataVisible:{get(){return this.visible},set(i){i||(this.$emit("close"),this.dataUser=new m)}},isSaveDisabled(){return!this.dataUser.name||!this.dataUser.email||!this.dataUser.roles.length||this.isSaving},rules(){return{name:[i=>!!i||"The field should have a value."],email:[i=>!!i||"The field should have a value."],password_confirmation:[i=>(!!i&&i)===this.dataUser.password||"Password não coincidem."]}}},methods:{close(){this.dataVisible=!1},async save(){this.isSaving=!0;try{let i=await this.dataUser.save();this.isSaving=!1,this.close(),this.$emit("input",i),this.$emit("saved",i)}catch(i){this.isSaving=!1,o.error(i)}}},watch:{user:function(i){this.dataUser=new m({roles:[],...i})},visible:function(i){this.dataVisible=i}},mounted:async function(){try{this.roles=await R.get()}catch(i){o.error(i)}}};var ge=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{scrollable:"","max-width":"48rem"},on:{keydown:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.dataVisible=!1}},model:{value:t.dataVisible,callback:function(a){t.dataVisible=a},expression:"dataVisible"}},[e("v-card",{staticClass:"px-5 py-5 vert-card",attrs:{loading:t.isSaving,height:"90vh"}},[e("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab",{key:"user"},[t._v("User")])],1),e("v-tabs-items",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",{key:"user"},[e("v-card",[e("v-card-text",{attrs:{dense:""}},[e("v-text-field",{attrs:{autofocus:"",label:"Name",id:"name","prepend-icon":"mdi-account-edit-outline",required:"",rules:t.rules.name},model:{value:t.dataUser.name,callback:function(a){t.$set(t.dataUser,"name",a)},expression:"dataUser.name"}}),e("v-text-field",{attrs:{label:"E-mail",id:"email",type:"email","prepend-icon":"mdi-email-outline",required:"",rules:t.rules.email},model:{value:t.dataUser.email,callback:function(a){t.$set(t.dataUser,"email",a)},expression:"dataUser.email"}}),e("v-text-field",{attrs:{label:"Password",id:"password",type:"password","prepend-icon":"mdi-lastpass",required:"",rules:t.rules.password},model:{value:t.dataUser.password,callback:function(a){t.$set(t.dataUser,"password",a)},expression:"dataUser.password"}}),e("v-text-field",{attrs:{label:"Password confirmation",id:"password_confirmation",type:"password","prepend-icon":"mdi-lastpass",required:"",rules:t.rules.password_confirmation},model:{value:t.dataUser.password_confirmation,callback:function(a){t.$set(t.dataUser,"password_confirmation",a)},expression:"dataUser.password_confirmation"}}),e("v-select",{attrs:{items:t.roles,"item-text":"name","item-value":"id",attach:"",chips:"","deletable-chips":!0,label:"Roles",id:"roles",multiple:"","prepend-icon":"mdi-dolly"},model:{value:t.dataUser.roles,callback:function(a){t.$set(t.dataUser,"roles",a)},expression:"dataUser.roles"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.isSaveDisabled},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},xe=[],ye=r(be,ge,xe);const we=ye.exports,ke={mixins:[w],components:{createDialog:we,cDataTable:k},data:()=>({headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Email",align:"start",sortable:!0,value:"email"},{text:"Actions",value:"actions",sortable:!1}],editedItem:new m,defaultItem:new m,createVisible:!1}),methods:{instance(i){return new m(i)}}};var $e=function(){var t=this,e=t._self._c;return e("c-data-table",[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length > 0"}],staticClass:"mb-10 tw-self-end",attrs:{color:"primary",dark:""},on:{click:function(a){return a.stopPropagation(),t.newItem.apply(null,arguments)}}},[t._v("Add user")]),e("create-dialog",{attrs:{visible:t.createVisible},on:{saved:function(a){return t.saved(a)},close:function(a){t.createVisible=!1}},model:{value:t.editedItem,callback:function(a){t.editedItem=a},expression:"editedItem"}}),t.list.length?e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,"fixed-header":!0,items:t.list,options:t.options,"server-items-length":t.totalItems,loading:t.isLoading,"sort-by":"name"},on:{"update:options":function(a){t.options=a}},scopedSlots:t._u([{key:"item.actions",fn:function({item:a}){return[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(s){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e("v-icon",{attrs:{small:""},on:{click:function(s){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!1,3840325745)}):e("div",{staticClass:"tw-flex tw-flex-col tw-content-center tw-items-center mt-50"},[e("h1",{staticClass:"tw-font-bold tw-text-lg"},[t._v("Ainda não existem alunos.")]),e("v-btn",{staticClass:"mt-10 tw-block",attrs:{color:"primary",dark:""},on:{click:function(a){t.createVisible=!0}}},[t._v("Add user")])],1)],1)},Ce=[],Se=r(ke,$e,Ce);const Ee=Se.exports;d.component("app-layout",at);d.component("toast",ot);d.component("report-card",mt);d.component("program-edition-index",Ht);d.component("company-index",ae);d.component("student-index",he);d.component("user-index",Ee);const A="",D="00:00:00",$="yyyy-MM-dd",C="HH:mm:ss",Pe=340,Ae="LIMPAR",De="OK",Ie={name:"v-datetime-picker",model:{prop:"datetime",event:"input"},props:{datetime:{type:[Date,String],default:null},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dialogWidth:{type:Number,default:Pe},dateFormat:{type:String,default:$},timeFormat:{type:String,default:C},clearText:{type:String,default:Ae},okText:{type:String,default:De},textFieldProps:{type:Object},datePickerProps:{type:Object},timePickerProps:{type:Object,default:function(){return{format:"24hr",scrollable:!0}}}},data(){return{display:!1,activeTab:0,date:A,time:D}},mounted(){this.init()},computed:{dateTimeFormat(){return this.dateFormat+" "+this.timeFormat},defaultDateTimeFormat(){return $+" "+C},formattedDatetime(){return this.selectedDatetime?b(this.selectedDatetime,this.dateTimeFormat):""},selectedDatetime(){if(this.date&&this.time){let i=this.date+" "+this.time;return this.time.length===5&&(i+=":00"),E(i,this.defaultDateTimeFormat,new Date)}else return null},dateSelected(){return!this.date}},methods:{init(){if(!this.datetime)return;let i;this.datetime instanceof Date?i=this.datetime:(typeof this.datetime=="string"||this.datetime instanceof String)&&(i=E(this.datetime,this.dateTimeFormat,new Date)),this.date=b(i,$),this.time=b(i,C)},okHandler(){this.resetPicker(),this.$emit("input",this.selectedDatetime)},clearHandler(){this.resetPicker(),this.date=A,this.time=D,this.$emit("input",null)},resetPicker(){this.display=!1,this.activeTab=0,this.$refs.timer&&(this.$refs.timer.selectingHour=!0)},showTimePicker(){this.activeTab=1}},watch:{datetime:function(){this.init()}}};var Ve=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{width:t.dialogWidth},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-text-field",t._g(t._b({attrs:{disabled:t.disabled,loading:t.loading,label:t.label,value:t.formattedDatetime,readonly:""},scopedSlots:t._u([{key:"progress",fn:function(){return[t._t("progress",function(){return[e("v-progress-linear",{attrs:{color:"primary",indeterminate:"",absolute:"",height:"2"}})]})]},proxy:!0}],null,!0)},"v-text-field",t.textFieldProps,!1),a))]}}]),model:{value:t.display,callback:function(a){t.display=a},expression:"display"}},[e("v-card",[e("v-card-text",{staticClass:"px-0 py-0"},[e("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[e("v-tab",{key:"calendar"},[t._t("dateIcon",function(){return[e("v-icon",[t._v("mdi-calendar")])]})],2),e("v-tab",{key:"timer",attrs:{disabled:t.dateSelected}},[t._t("timeIcon",function(){return[e("v-icon",[t._v("mdi-clock-outline")])]})],2),e("v-tab-item",{key:"calendar"},[e("v-date-picker",t._b({attrs:{"full-width":""},on:{input:t.showTimePicker},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}},"v-date-picker",t.datePickerProps,!1))],1),e("v-tab-item",{key:"timer"},[e("v-time-picker",t._b({ref:"timer",attrs:{"full-width":""},model:{value:t.time,callback:function(a){t.time=a},expression:"time"}},"v-time-picker",t.timePickerProps,!1))],1)],1)],1),e("v-card-actions",[e("v-spacer"),t._t("actions",function(){return[e("v-btn",{attrs:{color:"grey lighten-1",text:""},nativeOn:{click:function(a){return t.clearHandler.apply(null,arguments)}}},[t._v(t._s(t.clearText))]),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.okHandler}},[t._v(t._s(t.okText))])]},{parent:this})],2)],1)],1)},Te=[],Fe=r(Ie,Ve,Te);const Re=Fe.exports,qe=i=>{i.component("v-datetime-picker",Re)};d.use(F);d.use(qe);const Ne={icons:{iconfont:"mdi"},themes:{light:{...g}}},Ue={thresholds:{xs:640,sm:768,md:1024,lg:1280},scrollBarWidth:.1},Le=new F({breakpoint:Ue,theme:Ne,lang:{locales:{pt:z,en:O},current:"pt"}});V.Model.$http=window.axios;new d({vuetify:Le,el:"#app",data(){return{token:document.head.querySelector('meta[name="csrf-token"]')?.content}}});
